<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>北京1.1-1.3行程时间轴</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Microsoft YaHei", "Heiti SC", sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding-bottom: 80px;
        }
        
        /* 头部样式 - 故宫红色系 */
        .header {
            background: linear-gradient(135deg, #9E2A2B 0%, #BB3A3A 100%);
            color: white;
            padding: 20px 15px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            font-size: 22px;
            margin-bottom: 8px;
        }
        
        .header p {
            font-size: 14px;
            opacity: 0.9;
        }
        
        /* 统计卡片样式 - 只保留两项 */
        .stats-container {
            display: flex;
            flex-wrap: wrap;
            padding: 15px;
            gap: 10px;
            background-color: white;
            margin: 15px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .stat-card {
            flex: 1;
            min-width: 120px;
            text-align: center;
            padding: 12px 8px;
            background-color: #f8f9fa;
            border-radius: 8px;
        }
        
        .stat-card .value {
            font-size: 18px;
            font-weight: bold;
            color: #9E2A2B;
            margin-bottom: 4px;
        }
        
        .stat-card .label {
            font-size: 12px;
            color: #666;
        }
        
        /* 日期分组样式 - 宫墙红色系 */
        .date-group {
            margin: 15px;
            border-radius: 12px;
            background-color: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            overflow: hidden;
        }
        
        .date-header {
            background-color: #BB3A3A;
            color: white;
            padding: 12px 15px;
            font-weight: bold;
            font-size: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .date-header .day-cost {
            font-size: 14px;
            opacity: 0.9;
            font-weight: normal;
        }
        
        /* 行程项样式 */
        .schedule-list {
            padding: 10px 0;
        }
        
        .schedule-item {
            padding: 12px 15px;
            border-bottom: 1px solid #f1f1f1;
            display: flex;
            gap: 12px;
            position: relative;
        }
        
        .schedule-item:last-child {
            border-bottom: none;
        }
        
        /* 时间标签 - 调整宽度以适配更长的时间文本 */
        .time-tag {
            width: 100px; /* 从80px调整为100px，确保04:30-06:36能完整显示 */
            text-align: center;
            padding: 8px 5px;
            background-color: #fde8e8;
            color: #9E2A2B;
            border-radius: 6px;
            font-size: 12px; /* 略微缩小字体，提升适配性 */
            font-weight: bold;
            flex-shrink: 0; /* 关键：防止宽度被压缩 */
            white-space: nowrap; /* 关键：强制文本在一行显示 */
            overflow: hidden; /* 防止溢出 */
            text-overflow: ellipsis; /* 极端情况显示省略号 */
        }
        
        /* 行程内容 */
        .schedule-content {
            flex: 1;
        }
        
        .schedule-title {
            font-size: 15px;
            font-weight: bold;
            margin-bottom: 4px;
            color: #333;
        }
        
        .schedule-remind {
            font-size: 12px;
            color: #666;
            margin-bottom: 6px;
            line-height: 1.4;
        }
        
        .schedule-cost {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .cost-tag {
            font-size: 13px;
            font-weight: bold;
            color: #9E2A2B;
        }
        
        .cost-desc {
            font-size: 11px;
            color: #999;
        }
        
        /* 有费用的行程项 - 移除浅红色背景，改为纯白色 */
        .schedule-item.has-cost {
            background-color: #ffffff;
        }
        
        /* 底部导航 - 行程表、费用、地图 */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: white;
            display: flex;
            justify-content: space-around;
            padding: 12px 0;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
            z-index: 99;
        }
        
        .nav-item {
            text-align: center;
            color: #666;
            font-size: 12px;
        }
        
        .nav-item.active {
            color: #9E2A2B;
        }
        
        .nav-item i {
            font-size: 18px;
            margin-bottom: 4px;
        }
        
        /* 页面容器 - 默认隐藏非当前页 */
        .page {
            display: none;
        }
        
        .page.active {
            display: block;
        }
        
        /* 费用统计页面样式 */
        .cost-page {
            padding: 15px;
        }
        
        .cost-section {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .cost-section h3 {
            font-size: 16px;
            color: #9E2A2B;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid #f1f1f1;
        }
        
        .total-cost {
            text-align: center;
            padding: 20px 0;
        }
        
        .total-cost .amount {
            font-size: 28px;
            font-weight: bold;
            color: #9E2A2B;
            margin-bottom: 8px;
        }
        
        .total-cost .desc {
            font-size: 14px;
            color: #666;
        }
        
        .daily-cost-list {
            margin-top: 10px;
        }
        
        .daily-cost-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #f1f1f1;
        }
        
        .daily-cost-item:last-child {
            border-bottom: none;
        }
        
        .daily-cost-item .day {
            font-weight: bold;
            color: #333;
        }
        
        .daily-cost-item .cost {
            color: #9E2A2B;
            font-weight: bold;
        }
        
        /* 饼图尺寸缩小到1/4：原250px → 62.5px */
        .cost-category-chart {
            width: 100%;
            height: 62.5px;
            margin: 10px 0;
            /* 居中显示 */
            margin-left: auto;
            margin-right: auto;
            max-width: 200px;
        }
        
        .detail-cost-list {
            margin-top: 10px;
        }
        
        .detail-cost-item {
            display: flex;
            flex-wrap: wrap;
            padding: 10px 0;
            border-bottom: 1px solid #f1f1f1;
        }
        
        .detail-cost-item:last-child {
            border-bottom: none;
        }
        
        .detail-cost-item .name {
            flex: 2;
            color: #333;
        }
        
        .detail-cost-item .cost {
            flex: 1;
            text-align: right;
            color: #9E2A2B;
            font-weight: bold;
        }
        
        /* 地图页面样式 */
        .map-page {
            padding: 15px;
        }
        
        .map-controls {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .map-controls h3 {
            font-size: 16px;
            color: #9E2A2B;
            margin-bottom: 10px;
        }
        
        .day-selector {
            display: flex;
            gap: 8px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }
        
        .day-btn {
            padding: 6px 12px;
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 6px;
            color: #666;
            cursor: pointer;
            font-size: 13px;
        }
        
        .day-btn.active {
            background-color: #9E2A2B;
            color: white;
            border-color: #9E2A2B;
        }
        
        .map-container {
            width: 100%;
            height: 400px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            overflow: hidden;
            position: relative;
        }
        
        #map {
            width: 100%;
            height: 100%;
        }
        
        .location-distance {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            padding: 15px;
            margin-top: 15px;
        }
        
        .distance-item {
            padding: 8px 0;
            border-bottom: 1px solid #f1f1f1;
        }
        
        .distance-item:last-child {
            border-bottom: none;
        }
        
        .distance-item .route {
            font-size: 14px;
            color: #333;
            margin-bottom: 4px;
        }
        
        .distance-item .distance {
            font-size: 12px;
            color: #9E2A2B;
            font-weight: bold;
        }
        
        /* 响应式调整 */
        @media (max-width: 320px) {
            .stat-card {
                min-width: 100px;
            }
            
            .time-tag {
                width: 90px; /* 响应式下略微调整，保持适配 */
                font-size: 11px; /* 进一步缩小字体 */
            }
            
            .map-container {
                height: 300px;
            }
            
            /* 响应式下饼图进一步缩小 */
            .cost-category-chart {
                height: 50px;
                max-width: 150px;
            }
        }
    </style>
    <!-- 引入图标库 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- 引入Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- 引入高德地图API（已替换为你的密钥） -->
    <script type="text/javascript" src="https://webapi.amap.com/maps?v=2.0&key=88dcaf9099d9f0a306a959392a8c7e1f"></script>
</head>
<body>
    <!-- 头部 -->
    <div class="header">
        <h1>11和14的北京行程gogogo！</h1>
        <p>12.31-1.3 详细行程安排</p>
    </div>
    
    <!-- 行程表页面 -->
    <div class="page active" id="schedule-page">
        <!-- 统计卡片 - 只保留旅行天数和总费用 -->
        <div class="stats-container">
            <div class="stat-card">
                <div class="value">4天</div>
                <div class="label">旅行天数</div>
            </div>
            <div class="stat-card">
                <div class="value">¥7,417.80</div>
                <div class="label">总费用</div>
            </div>
        </div>
        
        <!-- 行程内容区 -->
        <div class="schedule-content">
            <!-- 12.31 行程 -->
            <div class="date-group">
                <div class="date-header">
                    <span>12月31日（除夕）</span>
                    <span class="day-cost">当日费用：¥6,547.00</span>
                </div>
                <div class="schedule-list">
                    <div class="schedule-item has-cost">
                        <div class="time-tag">15:40</div>
                        <div class="schedule-content">
                            <div class="schedule-title">网易→萧山机场T3</div>
                            <div class="schedule-remind">已预约包车，提前2小时到机场值机，携带身份证</div>
                            <div class="schedule-cost">
                                <span class="cost-tag">¥41.00</span>
                                <span class="cost-desc">网易-萧山机场接机</span>
                            </div>
                        </div>
                    </div>
                    <div class="schedule-item has-cost">
                        <div class="time-tag">17:50-20:30</div>
                        <div class="schedule-content">
                            <div class="schedule-title">杭州萧山机场T3→北京首都机场T2</div>
                            <div class="schedule-remind">无特殊提醒</div>
                            <div class="schedule-cost">
                                <span class="cost-tag">¥4,068.00</span>
                                <span class="cost-desc">杭州-北京飞机（往返2人）</span>
                            </div>
                        </div>
                    </div>
                    <div class="schedule-item has-cost">
                        <div class="time-tag">21:00-22:00</div>
                        <div class="schedule-content">
                            <div class="schedule-title">机场→酒店</div>
                            <div class="schedule-remind">已预约包车，约1小时</div>
                            <div class="schedule-cost">
                                <span class="cost-tag">¥59.00</span>
                                <span class="cost-desc">首都机场-酒店接机</span>
                            </div>
                        </div>
                    </div>
                    <div class="schedule-item has-cost">
                        <div class="time-tag">22:30</div>
                        <div class="schedule-content">
                            <div class="schedule-title">酒店休息</div>
                            <div class="schedule-remind">无特殊提醒</div>
                            <div class="schedule-cost">
                                <span class="cost-tag">¥2,379.00</span>
                                <span class="cost-desc">北京崇文门桔子水晶酒店（3晚）</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 1.1 行程 -->
            <div class="date-group">
                <div class="date-header">
                    <span>1月1日（元旦）</span>
                    <span class="day-cost">当日费用：¥121.80</span>
                </div>
                <div class="schedule-list">
                    <div class="schedule-item">
                        <!-- 修改：时间改为04:30-06:36 -->
                        <div class="time-tag">04:30-06:36</div>
                        <div class="schedule-content">
                            <div class="schedule-title">天安门广场西红墙安检01入场，升旗</div>
                            <div class="schedule-remind">提前1-9天在「天安门广场预约参观」小程序约升旗时段；带身份证+折叠凳+暖宝宝+保温杯热水</div>
                            <div class="schedule-cost">
                                <span class="cost-tag">¥0.00</span>
                                <span class="cost-desc">无费用</span>
                            </div>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="time-tag">08:00-11:30</div>
                        <div class="schedule-content">
                            <div class="schedule-title">天安门广场→酒店休息</div>
                            <div class="schedule-remind">车程20min，回酒店补觉、休整</div>
                            <div class="schedule-cost">
                                <span class="cost-tag">¥0.00</span>
                                <span class="cost-desc">无费用</span>
                            </div>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="time-tag">12:00-13:00</div>
                        <div class="schedule-content">
                            <div class="schedule-title">待安排</div>
                            <div class="schedule-remind">无特殊提醒</div>
                            <div class="schedule-cost">
                                <span class="cost-tag">¥0.00</span>
                                <span class="cost-desc">无费用</span>
                            </div>
                        </div>
                    </div>
                    <div class="schedule-item has-cost">
                        <div class="time-tag">13:00-16:00</div>
                        <div class="schedule-content">
                            <div class="schedule-title">天安门城楼 + 人民大会堂 + 天坛公园</div>
                            <div class="schedule-remind">1.登天安门城楼俯瞰广场（需预约）；2.参观人民大会堂外景/内部（需预约）；3.天坛公园（北门进南门出）</div>
                            <div class="schedule-cost">
                                <span class="cost-tag">¥65.80</span>
                                <span class="cost-desc">天安门城楼（2人）</span>
                            </div>
                        </div>
                    </div>
                    <div class="schedule-item has-cost">
                        <div class="time-tag">16:00-19:00</div>
                        <div class="schedule-content">
                            <div class="schedule-title">什刹海冰场</div>
                            <div class="schedule-remind">提前购票（美团/大众点评），携带身份证，冰鞋需押金</div>
                            <div class="schedule-cost">
                                <span class="cost-tag">¥56.00</span>
                                <span class="cost-desc">天坛公园（2人）</span>
                            </div>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="time-tag">19:00-20:30</div>
                        <div class="schedule-content">
                            <div class="schedule-title">前门大街晚餐，夜景</div>
                            <div class="schedule-remind">推荐四季民福烤鸭店（需提前预约）</div>
                            <div class="schedule-cost">
                                <span class="cost-tag">¥0.00</span>
                                <span class="cost-desc">无费用</span>
                            </div>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="time-tag">20:30后</div>
                        <div class="schedule-content">
                            <div class="schedule-title">酒店</div>
                            <div class="schedule-remind">无特殊提醒</div>
                            <div class="schedule-cost">
                                <span class="cost-tag">¥0.00</span>
                                <span class="cost-desc">无费用</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 1.2 行程 -->
            <div class="date-group">
                <div class="date-header">
                    <span>1月2日（核心日）</span>
                    <span class="day-cost">当日费用：¥749.00</span>
                </div>
                <div class="schedule-list">
                    <div class="schedule-item has-cost">
                        <div class="time-tag">10:30</div>
                        <div class="schedule-content">
                            <div class="schedule-title">星光兔西扶海棠-格格妆造</div>
                            <div class="schedule-remind">11点档期，需提前半小时到店（路程30min）王府世纪6楼601A</div>
                            <div class="schedule-cost">
                                <span class="cost-tag">¥499.00</span>
                                <span class="cost-desc">西扶海棠（单人，仅妆造）</span>
                            </div>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="time-tag">10:00-12:00</div>
                        <div class="schedule-content">
                            <div class="schedule-title">东华门 / 午门广场 / 故宫角楼（外景）</div>
                            <div class="schedule-remind">外围拍摄不进故宫</div>
                            <div class="schedule-cost">
                                <span class="cost-tag">¥0.00</span>
                                <span class="cost-desc">无费用</span>
                            </div>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="time-tag">12:00-13:00</div>
                        <div class="schedule-content">
                            <div class="schedule-title">附近午餐</div>
                            <div class="schedule-remind">无特殊提醒</div>
                            <div class="schedule-cost">
                                <span class="cost-tag">¥0.00</span>
                                <span class="cost-desc">无费用</span>
                            </div>
                        </div>
                    </div>
                    <div class="schedule-item has-cost">
                        <div class="time-tag">13:00-16:30</div>
                        <div class="schedule-content">
                            <div class="schedule-title">故宫博物院（午门进，神武门出）</div>
                            <div class="schedule-remind">提前7天20:00在「故宫博物院」小程序约下午场（11:00后入园），15:30神武门出</div>
                            <div class="schedule-cost">
                                <span class="cost-tag">¥246.00</span>
                                <span class="cost-desc">故宫（下午场，含珍宝馆+钟表馆，2人）</span>
                            </div>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="time-tag">16:30-17:00</div>
                        <div class="schedule-content">
                            <div class="schedule-title">神武门→西扶海棠归还衣服</div>
                            <div class="schedule-remind">无特殊提醒</div>
                            <div class="schedule-cost">
                                <span class="cost-tag">¥0.00</span>
                                <span class="cost-desc">无费用</span>
                            </div>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="time-tag">17:00-17:30</div>
                        <div class="schedule-content">
                            <div class="schedule-title">景山公园</div>
                            <div class="schedule-remind">无特殊提醒</div>
                            <div class="schedule-cost">
                                <span class="cost-tag">¥0.00</span>
                                <span class="cost-desc">无费用</span>
                            </div>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="time-tag">17:30-19:00</div>
                        <div class="schedule-content">
                            <div class="schedule-title">三里屯 / 北新桥晚餐</div>
                            <div class="schedule-remind">无特殊提醒</div>
                            <div class="schedule-cost">
                                <span class="cost-tag">¥0.00</span>
                                <span class="cost-desc">无费用</span>
                            </div>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="time-tag">19:00后</div>
                        <div class="schedule-content">
                            <div class="schedule-title">酒店</div>
                            <div class="schedule-remind">无特殊提醒</div>
                            <div class="schedule-cost">
                                <span class="cost-tag">¥0.00</span>
                                <span class="cost-desc">无费用</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 1.3 行程 -->
            <div class="date-group">
                <div class="date-header">
                    <span>1月3日（返程日）</span>
                    <span class="day-cost">当日费用：¥0.00</span>
                </div>
                <div class="schedule-list">
                    <div class="schedule-item">
                        <div class="time-tag">09:00-12:00</div>
                        <div class="schedule-content">
                            <div class="schedule-title">地坛公园 / 五道营胡同</div>
                            <div class="schedule-remind">无特殊提醒</div>
                            <div class="schedule-cost">
                                <span class="cost-tag">¥0.00</span>
                                <span class="cost-desc">无费用</span>
                            </div>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="time-tag">12:00-14:00</div>
                        <div class="schedule-content">
                            <div class="schedule-title">附近午餐</div>
                            <div class="schedule-remind">无特殊提醒</div>
                            <div class="schedule-cost">
                                <span class="cost-tag">¥0.00</span>
                                <span class="cost-desc">无费用</span>
                            </div>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="time-tag">15:00-17:45</div>
                        <div class="schedule-content">
                            <div class="schedule-title">酒店→北京首都机场</div>
                            <div class="schedule-remind">无特殊提醒</div>
                            <div class="schedule-cost">
                                <span class="cost-tag">¥0.00</span>
                                <span class="cost-desc">无费用</span>
                            </div>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="time-tag">19:45-21:50</div>
                        <div class="schedule-content">
                            <div class="schedule-title">北京首都机场T3→杭州萧山机场T3</div>
                            <div class="schedule-remind">无特殊提醒</div>
                            <div class="schedule-cost">
                                <span class="cost-tag">¥0.00</span>
                                <span class="cost-desc">无费用（已含在往返机票中）</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 费用统计页面 -->
    <div class="page" id="cost-page">
        <div class="cost-page">
            <!-- 总费用统计 -->
            <div class="cost-section">
                <h3>总费用统计</h3>
                <div class="total-cost">
                    <div class="amount">¥7,417.80</div>
                    <div class="desc">北京4日行程总费用（2人）</div>
                </div>
            </div>
            
            <!-- 每日费用明细 -->
            <div class="cost-section">
                <h3>每日费用明细</h3>
                <div class="daily-cost-list">
                    <div class="daily-cost-item">
                        <span class="day">12月31日（除夕）</span>
                        <span class="cost">¥6,547.00</span>
                    </div>
                    <div class="daily-cost-item">
                        <span class="day">1月1日（元旦）</span>
                        <span class="cost">¥121.80</span>
                    </div>
                    <div class="daily-cost-item">
                        <span class="day">1月2日（核心日）</span>
                        <span class="cost">¥749.00</span>
                    </div>
                    <div class="daily-cost-item">
                        <span class="day">1月3日（返程日）</span>
                        <span class="cost">¥0.00</span>
                    </div>
                </div>
            </div>
            
            <!-- 费用分类统计 -->
            <div class="cost-section">
                <h3>费用分类统计</h3>
                <canvas class="cost-category-chart" id="costCategoryChart"></canvas>
            </div>
            
            <!-- 详细费用明细 -->
            <div class="cost-section">
                <h3>详细费用明细</h3>
                <div class="detail-cost-list">
                    <div class="detail-cost-item">
                        <span class="name">网易-萧山机场接机</span>
                        <span class="cost">¥41.00</span>
                    </div>
                    <div class="detail-cost-item">
                        <span class="name">杭州-北京飞机（往返2人）</span>
                        <span class="cost">¥4,068.00</span>
                    </div>
                    <div class="detail-cost-item">
                        <span class="name">首都机场-酒店接机</span>
                        <span class="cost">¥59.00</span>
                    </div>
                    <div class="detail-cost-item">
                        <span class="name">北京崇文门桔子水晶酒店（3晚）</span>
                        <span class="cost">¥2,379.00</span>
                    </div>
                    <div class="detail-cost-item">
                        <span class="name">天安门城楼（2人）</span>
                        <span class="cost">¥65.80</span>
                    </div>
                    <div class="detail-cost-item">
                        <span class="name">天坛公园（2人）</span>
                        <span class="cost">¥56.00</span>
                    </div>
                    <div class="detail-cost-item">
                        <span class="name">西扶海棠（单人，仅妆造）</span>
                        <span class="cost">¥499.00</span>
                    </div>
                    <div class="detail-cost-item">
                        <span class="name">故宫（下午场，含珍宝馆+钟表馆，2人）</span>
                        <span class="cost">¥246.00</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 地图页面 -->
    <div class="page" id="map-page">
        <div class="map-page">
            <div class="map-controls">
                <h3>行程地图</h3>
                <div class="day-selector">
                    <button class="day-btn active" data-day="31">12月31日</button>
                    <button class="day-btn" data-day="01">1月1日</button>
                    <button class="day-btn" data-day="02">1月2日</button>
                    <button class="day-btn" data-day="03">1月3日</button>
                </div>
                <p style="font-size:12px;color:#666;">点击日期按钮查看对应行程位置，地图可缩放、拖拽</p>
            </div>
            
            <div class="map-container">
                <div id="map"></div>
            </div>
            
            <div class="location-distance">
                <h3>位置距离参考</h3>
                <div class="distance-item">
                    <div class="route">崇文门桔子水晶酒店 → 天安门广场</div>
                    <div class="distance">约3.5公里，车程15分钟</div>
                </div>
                <div class="distance-item">
                    <div class="route">天安门广场 → 天坛公园</div>
                    <div class="distance">约4.2公里，车程20分钟</div>
                </div>
                <div class="distance-item">
                    <div class="route">天坛公园 → 什刹海冰场</div>
                    <div class="distance">约7.8公里，车程30分钟</div>
                </div>
                <div class="distance-item">
                    <div class="route">崇文门桔子水晶酒店 → 故宫博物院</div>
                    <div class="distance">约4.8公里，车程25分钟</div>
                </div>
                <div class="distance-item">
                    <div class="route">故宫博物院 → 景山公园</div>
                    <div class="distance">约0.8公里，步行15分钟</div>
                </div>
                <div class="distance-item">
                    <div class="route">崇文门桔子水晶酒店 → 地坛公园</div>
                    <div class="distance">约5.6公里，车程25分钟</div>
                </div>
                <div class="distance-item">
                    <div class="route">崇文门桔子水晶酒店 → 北京首都机场</div>
                    <div class="distance">约28公里，车程45分钟</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 底部导航 - 行程表、费用、地图 -->
    <div class="bottom-nav">
        <div class="nav-item active" data-page="schedule-page">
            <i class="fas fa-calendar-alt"></i>
            <div>行程表</div>
        </div>
        <div class="nav-item" data-page="cost-page">
            <i class="fas fa-coins"></i>
            <div>费用统计</div>
        </div>
        <div class="nav-item" data-page="map-page">
            <i class="fas fa-map-marked-alt"></i>
            <div>行程地图</div>
        </div>
    </div>
    
    <script>
        // 页面切换功能
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', function() {
                // 移除所有active类
                document.querySelectorAll('.nav-item').forEach(nav => {
                    nav.classList.remove('active');
                });
                document.querySelectorAll('.page').forEach(page => {
                    page.classList.remove('active');
                });
                
                // 添加当前active类
                this.classList.add('active');
                const pageId = this.getAttribute('data-page');
                document.getElementById(pageId).classList.add('active');
                
                // 切换到地图页面时重新初始化地图（解决地图加载失效问题）
                if (pageId === 'map-page') {
                    setTimeout(initMap, 100);
                }
            });
        });
        
        // 行程项点击展开/收起提醒
        document.querySelectorAll('.schedule-item').forEach(item => {
            item.addEventListener('click', function() {
                const remind = this.querySelector('.schedule-remind');
                if (remind.style.maxHeight) {
                    remind.style.maxHeight = null;
                } else {
                    remind.style.maxHeight = remind.scrollHeight + 'px';
                }
            });
        });
        
        // 费用分类统计图表
        window.addEventListener('load', function() {
            // 初始化费用分类饼图
            const costCtx = document.getElementById('costCategoryChart').getContext('2d');
            new Chart(costCtx, {
                type: 'pie',
                data: {
                    labels: ['交通费用', '住宿费用', '景点门票', '体验费用'],
                    datasets: [{
                        data: [4168.00, 2379.00, 367.80, 499.00],
                        backgroundColor: [
                            '#9E2A2B',
                            '#BB3A3A',
                            '#D64933',
                            '#E57373'
                        ],
                        borderColor: '#fff',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 15,
                                font: {
                                    size: 12
                                }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = context.raw || 0;
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = Math.round((value / total) * 100);
                                    return `${label}: ¥${value.toFixed(2)} (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });
            
            // 页面加载完成后初始化地图
            initMap();
        });
        
        // 地图初始化和日期切换 - 修复版
        let map;
        let markers = {}; // 存储各日期的标记点
        let currentDay = '31'; // 默认显示12月31日
        
        function initMap() {
            // 先销毁已存在的地图实例，避免重复初始化
            if (map) {
                map.destroy();
            }
            
            // 初始化高德地图，中心点设为北京崇文门
            map = new AMap.Map('map', {
                zoom: 12, // 初始缩放级别
                center: [116.413384, 39.908823], // 崇文门坐标
                resizeEnable: true,
                scrollWheel: true // 允许鼠标滚轮缩放
            });
            
            // 添加地图控件
            map.addControl(new AMap.Scale());
            map.addControl(new AMap.Zoom());
            
            // 定义各日期的位置点
            const locations = {
                '31': [ // 12月31日
                    { name: '北京崇文门桔子水晶酒店', lnglat: [116.413384, 39.908823] },
                    { name: '北京首都国际机场T2', lnglat: [116.600939, 40.072455] }
                ],
                '01': [ // 1月1日
                    { name: '北京崇文门桔子水晶酒店', lnglat: [116.413384, 39.908823] },
                    { name: '天安门广场', lnglat: [116.397470, 39.908689] },
                    { name: '天坛公园', lnglat: [116.419850, 39.881824] },
                    { name: '什刹海冰场', lnglat: [116.396507, 39.942976] },
                    { name: '前门大街', lnglat: [116.390160, 39.904690] }
                ],
                '02': [ // 1月2日
                    { name: '北京崇文门桔子水晶酒店', lnglat: [116.413384, 39.908823] },
                    { name: '西扶海棠(王府世纪店)', lnglat: [116.403200, 39.915600] },
                    { name: '故宫博物院', lnglat: [116.390631, 39.916404] },
                    { name: '景山公园', lnglat: [116.397021, 39.925775] }
                ],
                '03': [ // 1月3日
                    { name: '北京崇文门桔子水晶酒店', lnglat: [116.413384, 39.908823] },
                    { name: '地坛公园', lnglat: [116.441800, 39.936700] },
                    { name: '五道营胡同', lnglat: [116.445200, 39.938500] },
                    { name: '北京首都国际机场T3', lnglat: [116.607960, 40.076570] }
                ]
            };
            
            // 清空原有标记点
            markers = {};
            
            // 为每个日期创建标记点（先隐藏）
            for (const day in locations) {
                markers[day] = [];
                locations[day].forEach(loc => {
                    const marker = new AMap.Marker({
                        position: loc.lnglat,
                        title: loc.name,
                        map: null, // 初始不显示
                        label: {
                            content: loc.name,
                            offset: new AMap.Pixel(0, -30),
                            fontSize: '12px',
                            fontWeight: 'bold'
                        }
                    });
                    markers[day].push(marker);
                });
            }
            
            // 显示默认日期的标记点
            showDayMarkers(currentDay);
            
            // 重新绑定日期选择按钮事件（解决切换失效问题）
            document.querySelectorAll('.day-btn').forEach(btn => {
                // 先移除原有事件，避免重复绑定
                btn.onclick = null;
                
                btn.addEventListener('click', function() {
                    // 移除所有active类
                    document.querySelectorAll('.day-btn').forEach(b => {
                        b.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    // 隐藏当前标记点，显示新日期的标记点
                    hideDayMarkers(currentDay);
                    currentDay = this.getAttribute('data-day');
                    showDayMarkers(currentDay);
                    
                    // 地图居中到第一个标记点
                    if (markers[currentDay] && markers[currentDay].length > 0) {
                        map.setCenter(markers[currentDay][0].getPosition());
                        map.setZoom(13);
                    }
                });
            });
        }
        
        // 显示指定日期的标记点
        function showDayMarkers(day) {
            if (markers[day]) {
                markers[day].forEach(marker => {
                    marker.setMap(map);
                });
            }
        }
        
        // 隐藏指定日期的标记点
        function hideDayMarkers(day) {
            if (markers[day]) {
                markers[day].forEach(marker => {
                    marker.setMap(null);
                });
            }
        }
    </script>
</body>
</html>
