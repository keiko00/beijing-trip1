<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>11å’Œ14åŒ—äº¬GO</title>
    <style>
        /* åŸæœ‰æ ·å¼å…¨éƒ¨ä¿ç•™ï¼Œä»…ç§»é™¤åœ°å›¾å®¹å™¨ç›¸å…³æ ·å¼ï¼Œæ–°å¢é€‚é…æ ·å¼ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Microsoft YaHei", sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding-bottom: 70px;
        }
        
        .header {
            background-image: url('https://raw.githubusercontent.com/keiko00/beijing-trip1/main/50.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            color: white;
            padding: 15px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.4);
            z-index: -1;
        }
        
        .header h1 {
            font-size: 20px;
            margin-bottom: 5px;
        }
        
        .header p {
            font-size: 13px;
            opacity: 0.9;
        }
        
        .date-group {
            margin: 10px;
            border-radius: 8px;
            background-color: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            overflow: hidden;
        }
        
        .date-header {
            background-color: #BB3A3A;
            color: white;
            padding: 10px 15px;
            font-weight: bold;
            font-size: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 5px;
        }
        
        .date-header .day-cost {
            font-size: 13px;
            opacity: 0.9;
            font-weight: normal;
        }
        
        .date-header .sun-time {
            font-size: 11px;
            opacity: 0.9;
            font-weight: normal;
            width: 100%;
            margin-top: 3px;
        }
        
        .schedule-list {
            padding: 8px 0;
        }
        
        .schedule-item {
            padding: 10px 15px;
            border-bottom: 1px solid #f1f1f1;
            display: flex;
            gap: 10px;
        }
        
        .schedule-item:last-child {
            border-bottom: none;
        }
        
        .time-tag {
            width: 85px;
            text-align: center;
            padding: 6px 3px;
            background-color: #fde8e8;
            color: #9E2A2B;
            border-radius: 4px;
            font-size: 11px;
            font-weight: bold;
            flex-shrink: 0;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .schedule-content {
            flex: 1;
        }
        
        .schedule-title {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 3px;
            color: #333;
        }
        
        .schedule-remind {
            font-size: 11px;
            color: #666;
            margin-bottom: 4px;
            line-height: 1.4;
        }
        
        .schedule-cost {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .cost-tag {
            font-size: 12px;
            font-weight: bold;
            color: #9E2A2B;
        }
        
        .cost-desc {
            font-size: 10px;
            color: #999;
        }
        
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: white;
            display: flex;
            justify-content: space-around;
            padding: 8px 0;
            box-shadow: 0 -2px 8px rgba(0,0,0,0.05);
            z-index: 99;
        }
        
        .nav-item {
            text-align: center;
            color: #666;
            font-size: 11px;
        }
        
        .nav-item.active {
            color: #9E2A2B;
        }
        
        .nav-item i {
            font-size: 16px;
            margin-bottom: 3px;
        }
        
        .page {
            display: none;
        }
        
        .page.active {
            display: block;
        }
        
        .cost-page {
            padding: 10px;
        }
        
        .cost-section {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            padding: 12px;
            margin-bottom: 10px;
        }
        
        .cost-section h3 {
            font-size: 15px;
            color: #9E2A2B;
            margin-bottom: 8px;
            padding-bottom: 6px;
            border-bottom: 1px solid #f1f1f1;
        }
        
        .total-cost {
            text-align: center;
            padding: 15px 0;
        }
        
        .total-cost .amount {
            font-size: 24px;
            font-weight: bold;
            color: #9E2A2B;
            margin-bottom: 5px;
        }
        
        .total-cost .desc {
            font-size: 12px;
            color: #666;
        }
        
        .daily-cost-list, .detail-cost-list {
            margin-top: 8px;
        }
        
        .daily-cost-item, .detail-cost-item {
            display: flex;
            justify-content: space-between;
            padding: 6px 0;
            border-bottom: 1px solid #f1f1f1;
        }
        
        .daily-cost-item:last-child, .detail-cost-item:last-child {
            border-bottom: none;
        }
        
        .daily-cost-item .day, .detail-cost-item .name {
            font-size: 13px;
            color: #333;
        }
        
        .daily-cost-item .cost, .detail-cost-item .cost {
            font-size: 12px;
            color: #9E2A2B;
            font-weight: bold;
        }
        
        /* è°ƒæ•´åœ°å›¾é¡µé¢æ ·å¼ï¼šç§»é™¤åœ°å›¾å®¹å™¨ï¼Œä¼˜åŒ–è·ç¦»ä¿¡æ¯å±•ç¤º */
        .map-page {
            padding: 10px;
        }
        
        .map-controls {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            padding: 12px;
            margin-bottom: 10px;
        }
        
        .map-controls h3 {
            font-size: 15px;
            color: #9E2A2B;
            margin-bottom: 8px;
        }
        
        .day-selector {
            display: flex;
            gap: 6px;
            margin-bottom: 8px;
            flex-wrap: wrap;
        }
        
        .day-btn {
            padding: 5px 10px;
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 4px;
            color: #666;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s ease;
        }
        
        .day-btn.active {
            background-color: #9E2A2B;
            color: white;
            border-color: #9E2A2B;
        }
        
        /* ç§»é™¤åœ°å›¾å®¹å™¨æ ·å¼ */
        .location-distance {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            padding: 12px;
            margin-top: 10px;
        }
        
        .location-distance h3 {
            font-size: 15px;
            color: #9E2A2B;
            margin-bottom: 8px;
            padding-bottom: 6px;
            border-bottom: 1px solid #f1f1f1;
        }
        
        .distance-item {
            padding: 8px 0;
            border-bottom: 1px solid #f1f1f1;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .distance-item:hover {
            background-color: #f8f9fa;
        }
        
        .distance-item:last-child {
            border-bottom: none;
        }
        
        .distance-item .route {
            font-size: 13px;
            color: #333;
            margin-bottom: 4px;
            font-weight: 500;
        }
        
        .distance-item .distance {
            font-size: 11px;
            color: #9E2A2B;
            font-weight: bold;
            margin-bottom: 2px;
        }
        
        .distance-item .transport {
            font-size: 10px;
            color: #666;
            display: flex;
            gap: 15px;
        }
        
        .transport-item {
            display: flex;
            align-items: center;
            gap: 3px;
        }
        
        .transport-item i {
            font-size: 9px;
            color: #9E2A2B;
        }
        
        @media (max-width: 375px) {
            .time-tag {
                width: 75px;
                font-size: 10px;
            }
            .transport-item {
                gap: 2px;
            }
            .distance-item .transport {
                gap: 10px;
            }
        }
        
        .highlight-red {
            color: #9E2A2B;
            font-weight: bold;
        }
        
        /* å¤©æ°”ä¿¡æ¯æ ·å¼ */
        .weather-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 8px;
            padding: 6px 12px;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            font-size: 12px;
            position: relative;
        }
        
        .weather-city {
            position: absolute;
            top: -8px;
            left: 12px;
            background-color: #2c5aa0;
            color: white;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 10px;
            font-weight: bold;
        }
        
        .weather-item {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 4px; /* ä¸ºåŸå¸‚æ ‡ç­¾ç•™å‡ºç©ºé—´ */
        }
        
        #weather-icon {
            font-size: 18px;
        }
        
        .weather-details {
            display: flex;
            flex-direction: column;
        }
        
        .weather-temp {
            font-size: 14px;
            font-weight: bold;
            line-height: 1.2;
        }
        
        .weather-desc {
            font-size: 10px;
            opacity: 0.8;
            line-height: 1.2;
        }
        
        .update-time {
            font-size: 9px;
            opacity: 0.7;
            margin-left: 12px;
        }
        
        /* å›¾ç‰‡ç›¸å…³æ ·å¼ */
        .schedule-image {
            width: 100%;
            max-width: 200px;
            height: 120px;
            object-fit: cover;
            border-radius: 6px;
            margin-top: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid transparent;
        }
        
        .schedule-image:hover {
            transform: scale(1.02);
            border-color: #BB3A3A;
        }
        
        .images-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 8px;
            padding: 8px;
            background-color: #f9f9f9;
            border-radius: 6px;
        }
        
        .image-placeholder {
            width: 80px;
            height: 60px;
            border: 2px dashed #ddd;
            border-radius: 4px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            color: #999;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .image-placeholder:hover {
            border-color: #BB3A3A;
            background-color: #f5f5f5;
        }
        
        .image-placeholder i {
            font-size: 16px;
            color: #BB3A3A;
            margin-bottom: 2px;
        }
        
        .travel-image {
            width: 80px;
            height: 60px;
            object-fit: cover;
            border-radius: 4px;
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        
        .travel-image:hover {
            transform: scale(1.05);
        }
        
        /* å›¾ç‰‡æ”¾å¤§æ¨¡æ€æ¡† */
        .image-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            cursor: pointer;
        }
        
        .image-modal img {
            max-width: 90%;
            max-height: 90%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border-radius: 8px;
        }
        
        .modal-close {
            position: absolute;
            top: 20px;
            right: 30px;
            color: white;
            font-size: 30px;
            font-weight: bold;
            cursor: pointer;
            z-index: 1001;
        }
        
        .modal-close:hover {
            opacity: 0.7;
        }
        
        /* å¯¼èˆªæ§åˆ¶ */
        .modal-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
            z-index: 1001;
            user-select: none;
            background: rgba(0, 0, 0, 0.3);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.3s ease;
        }
        
        .modal-prev {
            left: 30px;
        }
        
        .modal-next {
            right: 30px;
        }
        
        .modal-nav:hover {
            background: rgba(0, 0, 0, 0.6);
        }
        
        .modal-counter {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            background: rgba(0, 0, 0, 0.5);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            z-index: 1001;
        }
        
        /* åŠ è½½çŠ¶æ€æ ·å¼ */
        .modal-loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: white;
        }
        
        .loading-spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid white;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .error-icon {
            font-size: 48px;
            margin-bottom: 20px;
        }
        
        .modal-loading button {
            background: #BB3A3A;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
        }
        
        .modal-loading button:hover {
            background: #9A2E2E;
        }
    </style>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
</head>
<body>
    <div class="header">
        <h1>11å’Œ14åŒ—äº¬GO ğŸ’•</h1>
        <p>12.31-1.3 è¯¦ç»†è¡Œç¨‹å®‰æ’</p>
        <div class="weather-info">
            <div class="weather-item">
                <span id="weather-icon">ğŸŒ¤ï¸</span>
                <div class="weather-details">
                    <div class="weather-temp" id="weather-temp">--Â°C</div>
                    <div class="weather-desc" id="weather-desc">è·å–å¤©æ°”ä¸­...</div>
                </div>
            </div>
            <div class="update-time">
                <small id="weather-update">--:-- æ›´æ–°</small>
            </div>
        </div>
    </div>
    
    <!-- è¡Œç¨‹è¡¨é¡µé¢ï¼ˆæ— ä¿®æ”¹ï¼‰ -->
    <div class="page active" id="schedule-page">
        <div class="schedule-content">
            <!-- 12.31 è¡Œç¨‹ -->
            <div class="date-group">
                <div class="date-header">
                    <span>12æœˆ31æ—¥ï¼ˆæ˜ŸæœŸä¸‰ï¼‰</span>
                    <span class="day-cost">å½“æ—¥è´¹ç”¨ï¼šÂ¥6,547.00</span>
                </div>
                <div class="schedule-list">
                    <div class="schedule-item">
                        <div class="time-tag">15:40</div>
                        <div class="schedule-content">
                            <div class="schedule-title">æ­å·ç½‘æ˜“ä¸€æœŸä¸œé—¨â†’è§å±±æœºåœºT3</div>
                            <div class="schedule-remind">å·²é¢„çº¦åŒ…è½¦ï¼Œæå‰2å°æ—¶åˆ°æœºåœºå€¼æœº</div>
                            <div class="schedule-cost">
                                <span class="cost-tag">Â¥41.00</span>
                                <span class="cost-desc">æ­å·ç½‘æ˜“ä¸€æœŸä¸œé—¨-è§å±±æœºåœºæ¥æœº</span>
                            </div>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="time-tag">17:50-20:30</div>
                        <div class="schedule-content">
                            <div class="schedule-title">æ­å·è§å±±æœºåœºT3â†’åŒ—äº¬é¦–éƒ½æœºåœºT2</div>
                            <div class="schedule-cost">
                                <span class="cost-tag">Â¥4,068.00</span>
                                <span class="cost-desc">æ­å·-åŒ—äº¬é£æœºï¼ˆå¾€è¿”2äººï¼‰</span>
                            </div>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="time-tag">21:00-22:00</div>
                        <div class="schedule-content">
                            <div class="schedule-title">æœºåœºâ†’é…’åº—</div>
                            <div class="schedule-remind">å·²é¢„çº¦åŒ…è½¦ï¼Œçº¦1å°æ—¶</div>
                            <div class="schedule-cost">
                                <span class="cost-tag">Â¥59.00</span>
                                <span class="cost-desc">é¦–éƒ½æœºåœº-é…’åº—æ¥æœº</span>
                            </div>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="time-tag">22:30</div>
                        <div class="schedule-content">
                            <div class="schedule-title">é…’åº—ä¼‘æ¯</div>
                            <div class="schedule-cost">
                                <span class="cost-tag">Â¥2,379.00</span>
                                <span class="cost-desc">åŒ—äº¬å´‡æ–‡é—¨æ¡”å­æ°´æ™¶é…’åº—ï¼ˆ3æ™šï¼‰</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="date-group">
                <div class="date-header">
                    <span>1æœˆ1æ—¥ï¼ˆæ˜ŸæœŸå››ï¼‰</span>
                    <span class="day-cost">å½“æ—¥è´¹ç”¨ï¼šÂ¥121.80</span>
                    <span class="sun-time">ğŸŒ… æ—¥å‡ºï¼š07:36 | ğŸŒ‡ æ—¥è½ï¼š16:59</span>
                </div>
                <div class="schedule-list">
                    <div class="schedule-item">
                        <div class="time-tag">04:30-06:36</div>
                        <div class="schedule-content">
                            <div class="schedule-title">å¤©å®‰é—¨å¹¿åœºå‡æ——</div>
                            <div class="schedule-remind">è¥¿çº¢å¢™å®‰æ£€01å…¥åœºï¼Œå¸¦èº«ä»½è¯+æŠ˜å å‡³+æš–å®å®+ä¿æ¸©æ¯çƒ­æ°´<br><span class="highlight-red">å°½é‡ä¸å¸¦åŒ…</span></div>
                            <div class="images-grid" data-schedule-id="01-1">
                                <img src="https://raw.githubusercontent.com/keiko00/beijing-trip1/main/1.jpg" 
                                     alt="å¤©å®‰é—¨å¹¿åœºå‡æ——" 
                                     class="travel-image" 
                                     onclick="handleImageClick(this)">
                                <img src="https://raw.githubusercontent.com/keiko00/beijing-trip1/main/2.jpg" 
                                     alt="å¤©å®‰é—¨å¹¿åœºå‡æ——" 
                                     class="travel-image" 
                                     onclick="handleImageClick(this)">
                            </div>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="time-tag">08:00-08:45</div>
                        <div class="schedule-content">
                            <div class="schedule-title">æ¯›ä¸»å¸­çºªå¿µå ‚ç»ä»°</div>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="time-tag">09:00-11:30</div>
                        <div class="schedule-content">
                            <div class="schedule-title">å¤©å®‰é—¨å¹¿åœºâ†’é…’åº—ä¼‘æ¯</div>
                            <div class="schedule-remind">è½¦ç¨‹20minï¼Œå›é…’åº—è¡¥è§‰</div>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="time-tag">12:00-13:00</div>
                        <div class="schedule-content">
                            <div class="schedule-title">é™„è¿‘åˆé¤</div>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="time-tag">13:00-16:00</div>
                        <div class="schedule-content">
                            <div class="schedule-title">å¤©å®‰é—¨åŸæ¥¼ + äººæ°‘å¤§ä¼šå ‚ + å¤©å›å…¬å›­</div>
                            <div class="schedule-remind">1. ç™»å¤©å®‰é—¨åŸæ¥¼ä¿¯ç°å¹¿åœºï¼›<br>2. å‚è§‚äººæ°‘å¤§ä¼šå ‚å¤–æ™¯ / å†…éƒ¨ï¼›<br>3. é€›å¤©å›å…¬å›­ï¼Œæ‰“å¡ç¥ˆå¹´æ®¿ï¼Œå›éŸ³å£ï¼›<span class="highlight-red">å—é—¨æ¶®è‚‰</span></div>
                            <div class="schedule-cost">
                                <span class="cost-tag">Â¥121.80</span>
                            </div>
                            <div class="images-grid" data-schedule-id="02-2">
                                <img src="https://raw.githubusercontent.com/keiko00/beijing-trip1/main/13.jpg" 
                                     alt="å¤©å®‰é—¨åŸæ¥¼" 
                                     class="travel-image" 
                                     onclick="handleImageClick(this)">
                                <img src="https://raw.githubusercontent.com/keiko00/beijing-trip1/main/3.jpg" 
                                     alt="å¤©å®‰é—¨åŸæ¥¼" 
                                     class="travel-image" 
                                     onclick="handleImageClick(this)">
                                <img src="https://raw.githubusercontent.com/keiko00/beijing-trip1/main/4.jpg" 
                                     alt="å¤©å®‰é—¨åŸæ¥¼" 
                                     class="travel-image" 
                                     onclick="handleImageClick(this)">
                                <img src="https://raw.githubusercontent.com/keiko00/beijing-trip1/main/5.jpg" 
                                     alt="å¤©å›å…¬å›­" 
                                     class="travel-image" 
                                     onclick="handleImageClick(this)">
                                <img src="https://raw.githubusercontent.com/keiko00/beijing-trip1/main/10.jpg" 
                                     alt="å¤©å›å…¬å›­" 
                                     class="travel-image" 
                                     onclick="handleImageClick(this)">
                                <img src="https://raw.githubusercontent.com/keiko00/beijing-trip1/main/11.jpg" 
                                     alt="å¤©å›å…¬å›­" 
                                     class="travel-image" 
                                     onclick="handleImageClick(this)">
                                <img src="https://raw.githubusercontent.com/keiko00/beijing-trip1/main/12.jpg" 
                                     alt="å¤©å›å…¬å›­" 
                                     class="travel-image" 
                                     onclick="handleImageClick(this)">
                                <img src="https://raw.githubusercontent.com/keiko00/beijing-trip1/main/9.jpg" 
                                     alt="å¤©å›å…¬å›­" 
                                     class="travel-image" 
                                     onclick="handleImageClick(this)">
                                <img src="https://raw.githubusercontent.com/keiko00/beijing-trip1/main/14.jpg" 
                                     alt="å¤©å›å…¬å›­" 
                                     class="travel-image" 
                                     onclick="handleImageClick(this)">
                            </div>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="time-tag">16:00-19:00</div>
                        <div class="schedule-content">
                            <div class="schedule-title">ä»€åˆ¹æµ·å†°åœº<span class="highlight-red">ï¼ˆå…³æ³¨æ˜¯å¦å¼€æ”¾ï¼‰</span></div>
                            <div class="schedule-remind">ç°åœºè´­ç¥¨ï¼Œå¸¦èº«ä»½è¯<br>å‚æ™šç¯å…‰äº®èµ·æ—¶æ‹ç…§æ°›å›´æ„Ÿæ‹‰æ»¡</div>
                        </div>
                    </div>
                        <div class="schedule-item">
                        <div class="time-tag">19:00å</div>
                        <div class="schedule-content">
                            <div class="schedule-title">é…’åº—é™„è¿‘æ™šé¤</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="date-group">
                <div class="date-header">
                    <span>1æœˆ2æ—¥ï¼ˆæ˜ŸæœŸäº”ï¼‰</span>
                    <span class="day-cost">å½“æ—¥è´¹ç”¨ï¼šÂ¥753.00</span>
                    <span class="sun-time">ğŸŒ‡ æ—¥è½ï¼š17:00</span>
                </div>
                <div class="schedule-list">
                    <div class="schedule-item">
                        <div class="time-tag">10:00</div>
                        <div class="schedule-content">
                            <div class="schedule-title">è¥¿æ‰¶æµ·æ£ -æ ¼æ ¼å¦†é€ </div>
                            <div class="schedule-remind">11ç‚¹æ¡£æœŸï¼Œç‹åºœä¸–çºª6æ¥¼601A<br>è¡Œç¨‹åŠå°æ—¶ï¼Œéœ€æå‰åŠå°æ—¶åˆ°</div>
                            <div class="schedule-cost">
                                <span class="cost-tag">Â¥499.00</span>
                                <span class="cost-desc">å•äººä»…å¦†é€ </span>
                            </div>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="time-tag">13:00</div>
                        <div class="schedule-content">
                            <div class="schedule-title">æ•…å®«è§’æ¥¼å¤–æ™¯æ‹æ‘„+é™„è¿‘åˆé¤</div>
                            <div class="schedule-remind">ä¸œåé—¨ / åˆé—¨å¹¿åœº / æ•…å®«è§’æ¥¼ï¼ˆå¤–æ™¯ï¼‰æ‹æ‘„</div>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="time-tag">13:00-16:30</div>
                        <div class="schedule-content">
                            <div class="schedule-title">æ•…å®«åšç‰©é™¢</div>
                            <div class="schedule-remind">å—é—¨è¿›ï¼Œå…¥å›­æ—¶é—´ï¼š12:00<br>ä¸‹åˆåœºï¼ˆ13:00-16:00ï¼‰<br>æ•…å®«+çå®é¦†+é’Ÿè¡¨é¦†<br>ç¥æ­¦é—¨å‡º</div>
                            <div class="schedule-cost">
                                <span class="cost-tag">Â¥246.00</span>
                                <span class="cost-desc">å«çå®é¦†+é’Ÿè¡¨é¦†ï¼ˆ2äººï¼‰</span>
                            </div>
                            <div class="images-grid" data-schedule-id="02-3">
                                <img src="https://raw.githubusercontent.com/keiko00/beijing-trip1/main/21.jpg" 
                                     alt="æ•…å®«åšç‰©é™¢" 
                                     class="travel-image" 
                                     onclick="handleImageClick(this)">
                                <img src="https://raw.githubusercontent.com/keiko00/beijing-trip1/main/22.jpg" 
                                     alt="æ•…å®«åšç‰©é™¢" 
                                     class="travel-image" 
                                     onclick="handleImageClick(this)">
                                <img src="https://raw.githubusercontent.com/keiko00/beijing-trip1/main/23.jpg" 
                                     alt="æ•…å®«åšç‰©é™¢" 
                                     class="travel-image" 
                                     onclick="handleImageClick(this)">
                                <img src="https://raw.githubusercontent.com/keiko00/beijing-trip1/main/24.jpg" 
                                     alt="æ•…å®«åšç‰©é™¢" 
                                     class="travel-image" 
                                     onclick="handleImageClick(this)">
                            </div>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="time-tag">16:30-18:00</div>
                        <div class="schedule-content">
                            <div class="schedule-title">æ™¯å±±å…¬å›­</div>
                            <div class="schedule-remind">ä»æ•…å®«ç¥æ­¦é—¨å‡ºï¼Œæ­¥è¡Œ5åˆ†é’Ÿåˆ°æ™¯å±±å…¬å›­<br>ç™»ä¸‡æ˜¥äº­ï¼Œä¿¯ç°æ•…å®«å…¨æ™¯ï¼Œ17:00 å‰å…¥å›­<br>å¯¿çš‡æ®¿17:30åœæ­¢è¿›å…¥</div>
                            <div class="schedule-cost">
                                <span class="cost-tag">Â¥4.00</span>
                                <span class="cost-desc">é—¨ç¥¨ï¼ˆ2äººï¼‰</span>
                            </div>
                            <div class="images-grid" data-schedule-id="02-7">
                                <img src="https://raw.githubusercontent.com/keiko00/beijing-trip1/main/51.jpg" 
                                     alt="æ™¯å±±å…¬å›­" 
                                     class="travel-image" 
                                     onclick="handleImageClick(this)">
                                <img src="https://raw.githubusercontent.com/keiko00/beijing-trip1/main/36.jpg" 
                                     alt="æ™¯å±±å…¬å›­" 
                                     class="travel-image" 
                                     onclick="handleImageClick(this)">
                                <img src="https://raw.githubusercontent.com/keiko00/beijing-trip1/main/52.jpg" 
                                     alt="æ™¯å±±å…¬å›­" 
                                     class="travel-image" 
                                     onclick="handleImageClick(this)">
                            </div>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="time-tag">18:30-19:00</div>
                        <div class="schedule-content">
                            <div class="schedule-title">æ™¯å±±å…¬å›­â†’è¥¿æ‰¶æµ·æ£ å½’è¿˜è¡£æœ</div>
                            <div class="schedule-remind">æœ€æ™š19:00 å½’è¿˜</div>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="time-tag">19:00-19:30</div>
                        <div class="schedule-content">
                            <div class="schedule-title">è¥¿æ‰¶æµ·æ£ â†’æ½˜å®¶å›­</div>
                            <div class="schedule-remind">è½¦ç¨‹çº¦30åˆ†é’Ÿ</div>
                        </div>
                    </div>

                    <div class="schedule-item">
                        <div class="time-tag">19:30-22:00</div>
                        <div class="schedule-content">
                            <div class="schedule-title">æ½˜å®¶å›­</div>
                            <div class="schedule-remind">ä»è¥¿æ‰¶æµ·æ£ å‡ºå‘ï¼Œè½¦ç¨‹çº¦30åˆ†é’Ÿ<br>å¤ç©å¸‚åœºï¼Œæ·˜å®å¥½å»å¤„</div>
                            <div class="images-grid" data-schedule-id="02-8">
                                <img src="https://raw.githubusercontent.com/keiko00/beijing-trip1/main/31.jpg" 
                                     alt="æ½˜å®¶å›­" 
                                     class="travel-image" 
                                     onclick="handleImageClick(this)">
                                <img src="https://raw.githubusercontent.com/keiko00/beijing-trip1/main/17.jpg" 
                                     alt="æ½˜å®¶å›­" 
                                     class="travel-image" 
                                     onclick="handleImageClick(this)">
                            </div>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="time-tag">22:35</div>
                        <div class="schedule-content">
                            <div class="schedule-title">è¿”å›é…’åº—</div>
                            <div class="schedule-remind">ä»æ½˜å®¶å›­å‡ºå‘ï¼Œè½¦ç¨‹çº¦30-35åˆ†é’Ÿå›é…’åº—</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="date-group">
                <div class="date-header">
                    <span>1æœˆ3æ—¥ï¼ˆæ˜ŸæœŸå…­ï¼‰</span>
                    <span class="day-cost">å½“æ—¥è´¹ç”¨ï¼šÂ¥0.00</span>
                </div>
                <div class="schedule-list">
                    <div class="schedule-item">
                        <div class="time-tag">09:00-12:00</div>
                        <div class="schedule-content">
                            <div class="schedule-title">åœ°å›å…¬å›­ / äº”é“è¥èƒ¡åŒ</div>
                            <div class="images-grid" data-schedule-id="03-1">
                                <img src="https://raw.githubusercontent.com/keiko00/beijing-trip1/main/30.jpg" 
                                     alt="åœ°å›å…¬å›­" 
                                     class="travel-image" 
                                     onclick="handleImageClick(this)">
                                <img src="https://raw.githubusercontent.com/keiko00/beijing-trip1/main/26.jpg" 
                                     alt="åœ°å›å…¬å›­" 
                                     class="travel-image" 
                                     onclick="handleImageClick(this)">
                            </div>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="time-tag">12:00-14:00</div>
                        <div class="schedule-content">
                            <div class="schedule-title">é™„è¿‘åˆé¤</div>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="time-tag">15:00-17:45</div>
                        <div class="schedule-content">
                            <div class="schedule-title">é…’åº—â†’åŒ—äº¬é¦–éƒ½æœºåœº</div>
                            <div class="schedule-remind">æå‰ 2 å°æ—¶åˆ°æœºåœºï¼Œåœ°é“æœºåœºçº¿çº¦ 40 åˆ†é’Ÿ</div>
                        </div>
                    </div>
                    <div class="schedule-item">
                        <div class="time-tag">19:45-21:50</div>
                        <div class="schedule-content">
                            <div class="schedule-title">åŒ—äº¬é¦–éƒ½æœºåœºT3â†’æ­å·è§å±±æœºåœºT3</div>
                            <div class="schedule-remind">å·²å«åœ¨å¾€è¿”æœºç¥¨ä¸­</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- è´¹ç”¨ç»Ÿè®¡é¡µé¢ï¼ˆæ— ä¿®æ”¹ï¼‰ -->
    <div class="page" id="cost-page">
        <div class="cost-page">
            <div class="cost-section">
                <h3>æ€»è´¹ç”¨ç»Ÿè®¡</h3>
                <div class="total-cost">
                    <div class="amount">Â¥7,421.80</div>
                    <div class="desc">åŒ—äº¬4æ—¥è¡Œç¨‹æ€»è´¹ç”¨ï¼ˆ2äººï¼‰</div>
                </div>
            </div>
            
            <div class="cost-section">
                <h3>æ¯æ—¥è´¹ç”¨æ˜ç»†</h3>
                <div class="daily-cost-list">
                    <div class="daily-cost-item">
                        <span class="day">12æœˆ31æ—¥ï¼ˆæ˜ŸæœŸä¸‰ï¼‰</span>
                        <span class="cost">Â¥6,547.00</span>
                    </div>
                    <div class="daily-cost-item">
                        <span class="day">1æœˆ1æ—¥ï¼ˆæ˜ŸæœŸå››ï¼‰</span>
                        <span class="cost">Â¥121.80</span>
                    </div>
                    <div class="daily-cost-item">
                        <span class="day">1æœˆ2æ—¥ï¼ˆæ˜ŸæœŸäº”ï¼‰</span>
                        <span class="cost">Â¥753.00</span>
                    </div>
                    <div class="daily-cost-item">
                        <span class="day">1æœˆ3æ—¥ï¼ˆæ˜ŸæœŸå…­ï¼‰</span>
                        <span class="cost">Â¥0.00</span>
                    </div>
                </div>
            </div>
            
            <div class="cost-section">
                <h3>æ ¸å¿ƒè´¹ç”¨æ˜ç»†</h3>
                <div class="detail-cost-list">
                    <div class="detail-cost-item">
                        <span class="name">æ­å·-åŒ—äº¬å¾€è¿”æœºç¥¨ï¼ˆ2äººï¼‰</span>
                        <span class="cost">Â¥4,068.00</span>
                    </div>
                    <div class="detail-cost-item">
                        <span class="name">é…’åº—ä½å®¿ï¼ˆ3æ™šï¼‰</span>
                        <span class="cost">Â¥2,379.00</span>
                    </div>
                    <div class="detail-cost-item">
                        <span class="name">æ•…å®«é—¨ç¥¨ï¼ˆå«å±•é¦†ï¼‰</span>
                        <span class="cost">Â¥246.00</span>
                    </div>
                    <div class="detail-cost-item">
                        <span class="name">è¥¿æ‰¶æµ·æ£ å¦†é€ </span>
                        <span class="cost">Â¥499.00</span>
                    </div>
                    <div class="detail-cost-item">
                        <span class="name">æ™¯å±±å…¬å›­é—¨ç¥¨</span>
                        <span class="cost">Â¥4.00</span>
                    </div>
                    <div class="detail-cost-item">
                        <span class="name">å¤©å®‰é—¨åŸæ¥¼+å¤©å›å…¬å›­ï¼ˆ2äººï¼‰</span>
                        <span class="cost">Â¥121.80</span>
                    </div>
                    <div class="detail-cost-item">
                        <span class="name">å…¶ä»–äº¤é€šè´¹ç”¨</span>
                        <span class="cost">Â¥100.00</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- è¡Œç¨‹åœ°å›¾é¡µé¢ï¼šç§»é™¤åœ°å›¾å®¹å™¨ï¼Œä¿ç•™æ—¥æœŸé€‰æ‹©å’Œè·ç¦»ä¿¡æ¯ -->
    <div class="page" id="map-page">
        <div class="map-page">
            <div class="map-controls">
                <h3>è¡Œç¨‹è·ç¦»ä¿¡æ¯</h3>
                <div class="day-selector">
                    <button class="day-btn active" data-day="31">12æœˆ31æ—¥</button>
                    <button class="day-btn" data-day="01">1æœˆ1æ—¥</button>
                    <button class="day-btn" data-day="02">1æœˆ2æ—¥</button>
                    <button class="day-btn" data-day="03">1æœˆ3æ—¥</button>
                </div>
                <p style="font-size:11px;color:#666;">ç‚¹å‡»æ—¥æœŸæŸ¥çœ‹å¯¹åº”è¡Œç¨‹ä½ç½®å’Œäº¤é€šä¿¡æ¯</p>
            </div>
            
            <!-- ç§»é™¤åœ°å›¾å®¹å™¨ -->
            
            <div class="location-distance">
                <h3 id="distance-title">12æœˆ31æ—¥ æ ¸å¿ƒä½ç½®è·ç¦»</h3>
                <div id="distance-list" class="distance-list">
                </div>
            </div>
        </div>
    </div>
    
    <div class="bottom-nav">
        <div class="nav-item active" data-page="schedule-page">
            <i class="fa fa-calendar"></i>
            <div>è¡Œç¨‹è¡¨</div>
        </div>
        <div class="nav-item" data-page="map-page">
            <i class="fa fa-map-marker"></i>
            <div>è¡Œç¨‹åœ°å›¾</div>
        </div>
        <div class="nav-item" data-page="cost-page">
            <i class="fa fa-money"></i>
            <div>è´¹ç”¨ç»Ÿè®¡</div>
        </div>
    </div>
    
    <script>
        // é¡µé¢åˆ‡æ¢åŠŸèƒ½ï¼ˆæ— ä¿®æ”¹ï¼‰
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', function() {
                document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
                document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
                
                this.classList.add('active');
                document.getElementById(this.dataset.page).classList.add('active');
            });
        });
        
        // è·ç¦»æ•°æ®ï¼ˆä¿ç•™æ‰€æœ‰æ ¸å¿ƒä¿¡æ¯ï¼‰
        const distanceData = {
            '31': [
                {
                    route: 'é¦–éƒ½æœºåœºT2 â†’ æ¡”å­æ°´æ™¶é…’åº—ï¼ˆå´‡æ–‡é—¨åº—ï¼‰',
                    distance: 'çº¦28å…¬é‡Œ',
                    carTime: 'è½¦ç¨‹45åˆ†é’Ÿ',
                    publicTime: 'åœ°é“2å·çº¿çº¦1å°æ—¶10åˆ†é’Ÿ'
                }
            ],
            '01': [
                {
                    route: 'é…’åº— â†’ å¤©å®‰é—¨å¹¿åœº',
                    distance: 'çº¦3.5å…¬é‡Œ',
                    carTime: 'è½¦ç¨‹15åˆ†é’Ÿ',
                    publicTime: 'åœ°é“5å·çº¿è½¬1å·çº¿çº¦25åˆ†é’Ÿ'
                },
                {
                    route: 'å¤©å®‰é—¨å¹¿åœº â†’ å¤©å›å…¬å›­',
                    distance: 'çº¦4.2å…¬é‡Œ',
                    carTime: 'è½¦ç¨‹20åˆ†é’Ÿ',
                    publicTime: 'åœ°é“5å·çº¿çº¦30åˆ†é’Ÿ'
                },
                {
                    route: 'å¤©å›å…¬å›­ â†’ ä»€åˆ¹æµ·å†°åœº',
                    distance: 'çº¦7.8å…¬é‡Œ',
                    carTime: 'è½¦ç¨‹30åˆ†é’Ÿ',
                    publicTime: 'åœ°é“8å·çº¿è½¬6å·çº¿çº¦40åˆ†é’Ÿ'
                },
                {
                    route: 'ä»€åˆ¹æµ·å†°åœº â†’ é…’åº—é™„è¿‘æ™šé¤',
                    distance: 'çº¦6.2å…¬é‡Œ',
                    carTime: 'è½¦ç¨‹25åˆ†é’Ÿ',
                    publicTime: 'åœ°é“10å·çº¿è½¬5å·çº¿çº¦40åˆ†é’Ÿ'
                }
            ],
            '02': [
                {
                    route: 'é…’åº— â†’ æ•…å®«åšç‰©é™¢',
                    distance: 'çº¦4.8å…¬é‡Œ',
                    carTime: 'è½¦ç¨‹25åˆ†é’Ÿ',
                    publicTime: 'åœ°é“5å·çº¿è½¬1å·çº¿çº¦35åˆ†é’Ÿ'
                },
                {
                    route: 'æ•…å®«åšç‰©é™¢ â†’ æ™¯å±±å…¬å›­',
                    distance: 'çº¦0.8å…¬é‡Œ',
                    carTime: 'è½¦ç¨‹5åˆ†é’Ÿ',
                    publicTime: 'æ­¥è¡Œçº¦10åˆ†é’Ÿ'
                },
                {
                    route: 'æ™¯å±±å…¬å›­ â†’ è¥¿æ‰¶æµ·æ£ ',
                    distance: 'çº¦2.1å…¬é‡Œ',
                    carTime: 'è½¦ç¨‹10åˆ†é’Ÿ',
                    publicTime: 'åœ°é“1å·çº¿çº¦15åˆ†é’Ÿ'
                },
                {
                    route: 'è¥¿æ‰¶æµ·æ£  â†’ æ½˜å®¶å›­',
                    distance: 'çº¦8.5å…¬é‡Œ',
                    carTime: 'è½¦ç¨‹30åˆ†é’Ÿ',
                    publicTime: 'åœ°é“1å·çº¿è½¬10å·çº¿çº¦40åˆ†é’Ÿ'
                },
                {
                    route: 'æ½˜å®¶å›­ â†’ é…’åº—',
                    distance: 'çº¦10.2å…¬é‡Œ',
                    carTime: 'è½¦ç¨‹35åˆ†é’Ÿ',
                    publicTime: 'åœ°é“10å·çº¿è½¬5å·çº¿çº¦45åˆ†é’Ÿ'
                }
            ],
            '03': [
                {
                    route: 'é…’åº— â†’ åœ°å›å…¬å›­',
                    distance: 'çº¦5.2å…¬é‡Œ',
                    carTime: 'è½¦ç¨‹20åˆ†é’Ÿ',
                    publicTime: 'åœ°é“5å·çº¿çº¦25åˆ†é’Ÿ'
                },
                {
                    route: 'åœ°å›å…¬å›­ â†’ äº”é“è¥èƒ¡åŒ',
                    distance: 'çº¦0.5å…¬é‡Œ',
                    carTime: 'è½¦ç¨‹3åˆ†é’Ÿ',
                    publicTime: 'æ­¥è¡Œçº¦8åˆ†é’Ÿ'
                },
                {
                    route: 'é…’åº— â†’ é¦–éƒ½æœºåœºT3',
                    distance: 'çº¦29å…¬é‡Œ',
                    carTime: 'è½¦ç¨‹50åˆ†é’Ÿ',
                    publicTime: 'åœ°é“2å·çº¿è½¬æœºåœºçº¿çº¦1å°æ—¶15åˆ†é’Ÿ'
                }
            ]
        };
        
        // æ›´æ–°è·ç¦»ä¿¡æ¯ï¼ˆä¿ç•™æ‰€æœ‰åŠŸèƒ½ï¼‰
        function updateDistanceInfo(day) {
            const dayNames = {
                '31': '12æœˆ31æ—¥',
                '01': '1æœˆ1æ—¥',
                '02': '1æœˆ2æ—¥',
                '03': '1æœˆ3æ—¥'
            };
            
            document.getElementById('distance-title').textContent = `${dayNames[day]} æ ¸å¿ƒä½ç½®è·ç¦»`;
            
            const distanceList = document.getElementById('distance-list');
            distanceList.innerHTML = '';
            
            distanceData[day].forEach(item => {
                const distanceItem = document.createElement('div');
                distanceItem.className = 'distance-item';
                distanceItem.onclick = () => openGaodeMap(item.route);
                distanceItem.innerHTML = `
                    <div class="route">${item.route}</div>
                    <div class="distance">${item.distance}</div>
                    <div class="transport">
                        <div class="transport-item">
                            <i class="fa fa-car"></i> ${item.carTime}
                        </div>
                        <div class="transport-item">
                            <i class="fa fa-subway"></i> ${item.publicTime}
                        </div>
                    </div>
                `;
                distanceList.appendChild(distanceItem);
            });
        }
        
        // æ—¥æœŸé€‰æ‹©å™¨åŠŸèƒ½ï¼ˆä¿ç•™ï¼‰
        let currentDay = '31';
        document.querySelectorAll('.day-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.day-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                
                currentDay = this.dataset.day;
                updateDistanceInfo(currentDay);
            });
        });
        
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–è·ç¦»ä¿¡æ¯
        window.addEventListener('load', () => {
            updateDistanceInfo(currentDay);
        });
        
        // ä¼˜åŒ–çš„åœ°å›¾è·³è½¬åŠŸèƒ½ - æ”¯æŒç›´æ¥è·¯çº¿è§„åˆ’
        function openGaodeMap(route) {
            console.log('ğŸš€ åœ°å›¾è·³è½¬å¼€å§‹', route);
            
            // æå–èµ·ç‚¹å’Œç»ˆç‚¹
            const locations = route.split(' â†’ ');
            if (locations.length < 2) {
                console.error('âŒ è·¯çº¿æ ¼å¼é”™è¯¯ï¼Œæ— æ³•æå–èµ·ç‚¹å’Œç»ˆç‚¹');
                return;
            }
            
            const origin = locations[0].trim();
            const destination = locations[1].trim();
            console.log('ğŸ“ èµ·ç‚¹:', origin, 'ç»ˆç‚¹:', destination);
            
            // åˆ¤æ–­æ˜¯å¦å®‰è£…äº†é«˜å¾·åœ°å›¾APP
            const isMobile = /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            console.log('ğŸ“± è®¾å¤‡ç±»å‹:', isMobile ? 'ç§»åŠ¨ç«¯' : 'PCç«¯');
            
            // åŒ—äº¬åœ°æ ‡åœ°å€æ˜ å°„ï¼ˆç¡®ä¿å‡†ç¡®çš„åœ°å€ä¿¡æ¯ï¼‰
            const addressMap = {
                'é…’åº—': 'æ¡”å­æ°´æ™¶é…’åº—(å´‡æ–‡é—¨åº—)',
                'æ¡”å­æ°´æ™¶é…’åº—ï¼ˆå´‡æ–‡é—¨åº—ï¼‰': 'æ¡”å­æ°´æ™¶é…’åº—(å´‡æ–‡é—¨åº—)',
                'å¤©å®‰é—¨å¹¿åœº': 'åŒ—äº¬å¸‚ä¸œåŸåŒºå¤©å®‰é—¨å¹¿åœº',
                'å¤©å®‰é—¨åŸæ¥¼': 'åŒ—äº¬å¸‚ä¸œåŸåŒºå¤©å®‰é—¨å¹¿åœº',
                'äººæ°‘å¤§ä¼šå ‚': 'åŒ—äº¬å¸‚ä¸œåŸåŒºå¤©å®‰é—¨å¹¿åœº',
                'å¤©å›å…¬å›­': 'åŒ—äº¬å¸‚ä¸œåŸåŒºå¤©å›è·¯ç”²1å·',
                'æ•…å®«åšç‰©é™¢': 'åŒ—äº¬å¸‚ä¸œåŸåŒºæ™¯å±±å‰è¡—4å·',
                'æ™¯å±±å…¬å›­': 'åŒ—äº¬å¸‚ä¸œåŸåŒºæ™¯å±±å‰è¡—',
                'ä»€åˆ¹æµ·å†°åœº': 'åŒ—äº¬å¸‚è¥¿åŸåŒºä»€åˆ¹æµ·',
                'æ½˜å®¶å›­': 'åŒ—äº¬å¸‚æœé˜³åŒºæ½˜å®¶å›­',
                'æ½˜å®¶å›­+æ™šé¤': 'åŒ—äº¬å¸‚æœé˜³åŒºæ½˜å®¶å›­',
                'åœ°å›å…¬å›­': 'åŒ—äº¬å¸‚ä¸œåŸåŒºåœ°å›å…¬å›­',
                'äº”é“è¥èƒ¡åŒ': 'åŒ—äº¬å¸‚ä¸œåŸåŒºäº”é“è¥èƒ¡åŒ',
                'é¦–éƒ½æœºåœºT2': 'åŒ—äº¬å¸‚é¡ºä¹‰åŒºåŒ—äº¬é¦–éƒ½å›½é™…æœºåœºT2èˆªç«™æ¥¼',
                'é¦–éƒ½æœºåœºT3': 'åŒ—äº¬å¸‚é¡ºä¹‰åŒºåŒ—äº¬é¦–éƒ½å›½é™…æœºåœºT3èˆªç«™æ¥¼',
                'è§å±±æœºåœºT3': 'æµ™æ±Ÿçœæ­å·å¸‚è§å±±åŒºæ­å·è§å±±å›½é™…æœºåœºT3èˆªç«™æ¥¼',
                'ç½‘æ˜“': 'æµ™æ±Ÿçœæ­å·å¸‚æ»¨æ±ŸåŒºç½‘å•†è·¯599å·',
                'ä¸‰é‡Œå±¯': 'åŒ—äº¬å¸‚æœé˜³åŒºä¸‰é‡Œå±¯',
                'è¥¿æ‰¶æµ·æ£ ': 'åŒ—äº¬å¸‚ä¸œåŸåŒºè¥¿æ‰¶æµ·æ£ '
            };
            
            // è·å–å‡†ç¡®çš„åœ°å€ä¿¡æ¯ - èµ·ç‚¹ä¿æŒåŸæ ·ï¼Œç»ˆç‚¹ç»Ÿä¸€æ˜ å°„åˆ°é…’åº—
            let originAddress = addressMap[origin] || `${origin},åŒ—äº¬å¸‚`;
            let destinationAddress = addressMap[destination] || `${destination},åŒ—äº¬å¸‚`;
            
            // ç‰¹æ®Šå¤„ç†ï¼šå¦‚æœèµ·ç‚¹æˆ–ç»ˆç‚¹åŒ…å«æœºåœºã€è½¦ç«™ç­‰ï¼Œéœ€è¦æ˜¾ç¤ºå®é™…è·¯çº¿
            // ç»Ÿä¸€ç»ˆç‚¹ç‚¹ä¸ºæ¡”å­æ°´æ™¶é…’åº—(å´‡æ–‡é—¨åº—)ï¼Œèµ·ç‚¹ä¿æŒå®é™…ä½ç½®
            if (destination.includes('é…’åº—') || destination === 'æ¡”å­æ°´æ™¶é…’åº—ï¼ˆå´‡æ–‡é—¨åº—ï¼‰') {
                destinationAddress = 'æ¡”å­æ°´æ™¶é…’åº—(å´‡æ–‡é—¨åº—)';
            }
            
            // æœºåœºè·¯çº¿ç‰¹æ®Šå¤„ç†ï¼šèµ·ç‚¹ä¸ºå®é™…ä½ç½®ï¼Œç»ˆç‚¹ä¸ºé…’åº—
            if (origin.includes('æœºåœº') || origin.includes('T2') || origin.includes('T3')) {
                // ä¿æŒèµ·ç‚¹ä¸å˜ï¼ˆå®é™…æœºåœºä½ç½®ï¼‰ï¼Œç»ˆç‚¹ä¸ºé…’åº—
                destinationAddress = 'æ¡”å­æ°´æ™¶é…’åº—(å´‡æ–‡é—¨åº—)';
            }
            
            console.log('ğŸ  èµ·ç‚¹åœ°å€:', originAddress);
            console.log('ğŸ  ç»ˆç‚¹åœ°å€:', destinationAddress);
            
            // éªŒè¯åœ°å€æ˜¯å¦æœ‰æ•ˆ
            if (!originAddress || !destinationAddress) {
                console.error('âŒ åœ°å€æ˜ å°„å¤±è´¥');
                return;
            }
            
            if (isMobile) {
                console.log('ğŸ”„ ç§»åŠ¨ç«¯å¤„ç†ä¸­...');
                
                // ç§»åŠ¨ç«¯ï¼šå°è¯•æ‰“å¼€é«˜å¾·åœ°å›¾APP - å¯¼èˆªåˆ°ç›®çš„åœ°
                const isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);
                console.log('ğŸ iOSè®¾å¤‡:', isIOS);
                
                // è·å–å‡†ç¡®çš„åœ°ç†ä½ç½®åç§°ç”¨äºé«˜å¾·æœç´¢
                const searchKeyword = destinationAddress.includes('é…’åº—') ? 'æ¡”å­æ°´æ™¶é…’åº—å´‡æ–‡é—¨åº—' : destinationAddress;
                
                if (isIOS) {
                    // iOSé«˜å¾·åœ°å›¾URL - ç›´æ¥å¯¼èˆªåˆ°ç›®çš„åœ°ï¼Œé«˜å¾·ä¼šè·å–å½“å‰ä½ç½®
                    const gaodeAppUrl = `iosamap://navi?query=${encodeURIComponent(searchKeyword)}&dev=0&style=2`;
                    
                    console.log('ğŸ“± iOS URL:', gaodeAppUrl);
                    
                    const link = document.createElement('a');
                    link.href = gaodeAppUrl;
                    link.style.display = 'none';
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                } else {
                    // Androidé«˜å¾·åœ°å›¾URL - ç›´æ¥å¯¼èˆªåˆ°ç›®çš„åœ°ï¼Œé«˜å¾·ä¼šè·å–å½“å‰ä½ç½®
                    const gaodeAppUrl = `androidamap://navi?query=${encodeURIComponent(searchKeyword)}&dev=0&style=2`;
                    
                    console.log('ğŸ¤– Android URL:', gaodeAppUrl);
                    
                    const link = document.createElement('a');
                    link.href = gaodeAppUrl;
                    link.style.display = 'none';
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                }
                
                // 2ç§’åæ‰“å¼€ç½‘é¡µç‰ˆä½œä¸ºå¤‡é€‰
                setTimeout(() => {
                    console.log('ğŸŒ æ‰“å¼€ç½‘é¡µç‰ˆé«˜å¾·åœ°å›¾...');
                    const webUrl = `https://ditu.amap.com/search?query=${encodeURIComponent(searchKeyword)}`;
                    console.log('ğŸŒ ç½‘é¡µç‰ˆURL:', webUrl);
                    window.open(webUrl, '_blank');
                }, 2000);
                
            } else {
                console.log('ğŸ’» PCç«¯å¤„ç†ä¸­...');
                
                // PCç«¯ï¼šæ‰“å¼€é«˜å¾·åœ°å›¾ç½‘é¡µç‰ˆè¿›è¡Œè·¯çº¿è§„åˆ’ï¼Œè®©ç”¨æˆ·è‡ªå·±å®šä½
                const searchKeyword = destinationAddress.includes('é…’åº—') ? 'æ¡”å­æ°´æ™¶é…’åº—å´‡æ–‡é—¨åº—' : destinationAddress;
                const routeUrl = `https://ditu.amap.com/search?query=${encodeURIComponent(searchKeyword)}`;
                console.log('ğŸ’» PCç«¯URL:', routeUrl);
                window.open(routeUrl, '_blank');
            }
            
            console.log('âœ… åœ°å›¾è·³è½¬å®Œæˆ');
        }
        
        // å¤©æ°”ä¿¡æ¯åŠŸèƒ½
        function getBeijingWeather() {
            // ä½¿ç”¨wttr.inæœåŠ¡è·å–åŒ—äº¬å¸‚å¤©æ°”ï¼ˆåŒ…æ‹¬æ—¥å‡ºæ—¥è½ï¼‰
            // ä½œä¸ºä¸»è¦æ•°æ®æºï¼Œæ›´åŠ ç¨³å®šå¯é 
            const beijingWeatherUrl = 'https://wttr.in/Beijing?format=j1&lang=zh';
            
            console.log('æ­£åœ¨è·å–åŒ—äº¬å¸‚å¤©æ°”æ•°æ®...', beijingWeatherUrl);
            
            fetch(beijingWeatherUrl)
                .then(response => {
                    console.log('APIå“åº”çŠ¶æ€:', response.status, response.statusText);
                    if (!response.ok) {
                        throw new Error(`Weather API unavailable: ${response.status}`);
                    }
                    return response.json();
                })
                .then(data => {
                    console.log('è·å–åˆ°å¤©æ°”æ•°æ®:', data);
                    // è§£æwttr.inè¿”å›çš„æ•°æ®æ ¼å¼
                    if (data.current_condition && data.current_condition[0] && data.weather && data.weather[0] && data.weather[0].astronomy && data.weather[0].astronomy[0]) {
                        const current = data.current_condition[0];
                        const astronomy = data.weather[0].astronomy[0];  // astronomyåœ¨weather[0]ä¸­
                        console.log('å½“å‰æ¸©åº¦:', current.temp_C);
                        console.log('æ—¥å‡ºæ—¶é—´:', astronomy.sunrise);
                        console.log('æ—¥è½æ—¶é—´:', astronomy.sunset);
                        
                        const weatherData = {
                            main: { temp: parseInt(current.temp_C) - 2 }, // æ¸©åº¦è°ƒæ•´ï¼šå‡å»2åº¦
                            weather: [{ 
                                main: mapWeatherCondition(current.weatherCode), 
                                description: mapWeatherDescription(current.weatherCode) 
                            }],
                            name: 'åŒ—äº¬',
                            sunrise: astronomy.sunrise,
                            sunset: astronomy.sunset
                        };
                        updateWeatherDisplay(weatherData);
                        updateSunTimes(weatherData);
                    } else {
                        console.error('å¤©æ°”æ•°æ®æ ¼å¼æ— æ•ˆ:', data);
                        console.log('å“åº”æ•°æ®ç»“æ„:', Object.keys(data));
                        console.log('current_condition:', data.current_condition);
                        console.log('weatheræ•°ç»„é•¿åº¦:', data.weather ? data.weather.length : 0);
                        console.log('weather[0]å®Œæ•´ç»“æ„:', data.weather ? data.weather[0] : 'undefined');
                        console.log('weather[0].astronomy:', data.weather && data.weather[0] ? data.weather[0].astronomy : 'undefined');
                        console.log('å°è¯•æ£€æŸ¥data.astronomy:', data.astronomy);
                        
                        // å¦‚æœæ•°æ®æ ¼å¼ä¸å¯¹ï¼Œæ˜¾ç¤ºæ— æ³•è·å–æ¸©åº¦çš„çŠ¶æ€
                        document.getElementById('weather-temp').textContent = '--';
                        document.getElementById('weather-desc').textContent = 'å¤©æ°”æ•°æ®è§£æå¤±è´¥';
                        document.getElementById('weather-icon').textContent = 'â“';
                        document.getElementById('weather-update').textContent = '--:--';
                        
                        // å°è¯•ä»å…¶ä»–ä½ç½®è·å–å¤©æ–‡æ•°æ®
                        if (data.astronomy && data.astronomy[0]) {
                            console.log('æ‰¾åˆ°æ ¹çº§åˆ«astronomyæ•°æ®');
                            const astronomy = data.astronomy[0];
                            const weatherData = {
                                main: { temp: parseInt(data.current_condition[0].temp_C) - 2 }, // æ¸©åº¦è°ƒæ•´ï¼šå‡å»2åº¦
                                weather: [{ 
                                    main: mapWeatherCondition(data.current_condition[0].weatherCode), 
                                    description: mapWeatherDescription(data.current_condition[0].weatherCode) 
                                }],
                                name: 'åŒ—äº¬',
                                sunrise: astronomy.sunrise,
                                sunset: astronomy.sunset
                            };
                            updateWeatherDisplay(weatherData);
                            updateSunTimes(weatherData);
                        } else if (data.weather && data.weather[0] && data.weather[0].astronomy) {
                            console.log('æ‰¾åˆ°weatherä¸­çš„astronomyæ•°æ®');
                            const astronomy = data.weather[0].astronomy[0];
                            const weatherData = {
                                main: { temp: parseInt(data.current_condition[0].temp_C) - 2 }, // æ¸©åº¦è°ƒæ•´ï¼šå‡å»2åº¦
                                weather: [{ 
                                    main: mapWeatherCondition(data.current_condition[0].weatherCode), 
                                    description: mapWeatherDescription(data.current_condition[0].weatherCode) 
                                }],
                                name: 'åŒ—äº¬',
                                sunrise: astronomy.sunrise,
                                sunset: astronomy.sunset
                            };
                            updateWeatherDisplay(weatherData);
                            updateSunTimes(weatherData);
                        } else {
                            console.log('æ— æ³•æ‰¾åˆ°ä»»ä½•å¤©æ–‡æ•°æ®ï¼Œæ˜¾ç¤º--');
                            // æ›´æ–°æ—¥å‡ºæ—¥è½æ˜¾ç¤ºä¸º--
                            const janFirstSunTime = document.querySelector('.date-group .sun-time');
                            if (janFirstSunTime) {
                                janFirstSunTime.innerHTML = 'ğŸŒ… æ—¥å‡ºï¼š-- | ğŸŒ‡ æ—¥è½ï¼š--';
                            }
                            
                            const allSunTimes = document.querySelectorAll('.sun-time');
                            allSunTimes.forEach((element, index) => {
                                if (index === 0) {
                                    element.innerHTML = 'ğŸŒ… æ—¥å‡ºï¼š-- | ğŸŒ‡ æ—¥è½ï¼š--';
                                } else {
                                    element.innerHTML = 'ğŸŒ‡ æ—¥è½ï¼š--';
                                }
                            });
                        }
                    }
                })
                .catch(error => {
                    console.log('wttr.in APIè°ƒç”¨å¤±è´¥ï¼Œå°è¯•å¤‡ç”¨API');
                    // å¤‡ç”¨ï¼šä½¿ç”¨è‹¹æœå¤©æ°”æ•°æ®API
                    const backupUrl = 'https://weather-bridge-prod.global.ssl.fastly.net/api/v1/forecast?lat=39.9042&lon=116.4074&region=CN&city=åŒ—äº¬å¸‚&tz=Asia/Shanghai&units=metric&lang=zh-CN';
                    console.log('å°è¯•å¤‡ç”¨API:', backupUrl);
                    fetch(backupUrl)
                        .then(response => {
                            if (!response.ok) {
                                throw new Error('Backup API unavailable');
                            }
                            return response.json();
                        })
                        .then(data => {
                            // è§£æè‹¹æœå¤©æ°”æ•°æ®æ ¼å¼
                            if (data && data.currentWeather && data.dailyForecast && data.dailyForecast[0]) {
                                const current = data.currentWeather;
                                const today = data.dailyForecast[0];
                                const weatherData = {
                                    main: { temp: Math.round(current.temperature) }, // è‹¹æœå¤©æ°”æ•°æ®ä¸è°ƒæ•´
                                    weather: [{ 
                                        main: mapAppleWeatherCondition(current.conditionCode), 
                                        description: mapAppleWeatherDescription(current.conditionCode) 
                                    }],
                                    name: 'åŒ—äº¬å¸‚',
                                    sunrise: today.sunrise,
                                    sunset: today.sunset
                                };
                                updateWeatherDisplay(weatherData);
                                updateSunTimes(weatherData);
                            } else {
                                throw new Error('Invalid weather data format');
                            }
                        })
                        .catch(error2 => {
                            console.log('æ‰€æœ‰å¤©æ°”APIè°ƒç”¨å¤±è´¥ï¼Œæ— æ³•è·å–å®æ—¶å¤©æ°”æ•°æ®');
                            // æ˜¾ç¤ºæ— æ³•è·å–æ¸©åº¦çš„çŠ¶æ€
                            document.getElementById('weather-temp').textContent = '--';
                            document.getElementById('weather-desc').textContent = 'å½“å‰æ— æ³•æ˜¾ç¤ºæ¸©åº¦';
                            document.getElementById('weather-icon').textContent = 'â“';
                            document.getElementById('weather-update').textContent = '--:--';
                        });
                });
        }
        
        // æ˜ å°„è‹¹æœå¤©æ°”ä»£ç åˆ°æ ‡å‡†æ ¼å¼
        function mapAppleWeatherCondition(conditionCode) {
            const conditionMap = {
                'clear-day': 'Clear',
                'clear-night': 'Clear',
                'partly-cloudy-day': 'Clouds',
                'partly-cloudy-night': 'Clouds',
                'cloudy': 'Clouds',
                'fog': 'Mist',
                'wind': 'Mist',
                'rain': 'Rain',
                'sleet': 'Rain',
                'snow': 'Snow',
                'thunderstorm': 'Thunderstorm'
            };
            return conditionMap[conditionCode] || 'Clear';
        }

        // æ˜ å°„è‹¹æœå¤©æ°”ä»£ç åˆ°ä¸­æ–‡æè¿°
        function mapAppleWeatherDescription(conditionCode) {
            const descMap = {
                'clear-day': 'æ™´æœ—',
                'clear-night': 'æ™´æœ—',
                'partly-cloudy-day': 'å¤šäº‘',
                'partly-cloudy-night': 'å¤šäº‘',
                'cloudy': 'é˜´å¤©',
                'fog': 'é›¾',
                'wind': 'å¤§é£',
                'rain': 'é›¨å¤©',
                'sleet': 'é›¨å¤¹é›ª',
                'snow': 'é›ªå¤©',
                'thunderstorm': 'é›·æš´'
            };
            return descMap[conditionCode] || 'æ™´æœ—';
        }
        
        // æ˜ å°„wttr.inçš„å¤©æ°”ä»£ç åˆ°æ ‡å‡†æ ¼å¼
        function mapWeatherCondition(code) {
            const codeMap = {
                '113': 'Clear',  // æ™´æœ—
                '116': 'Clouds', // å¤šäº‘
                '119': 'Clouds', // é˜´å¤©
                '122': 'Clouds', // å¤§é˜´å¤©
                '143': 'Clouds', // é›¾
                '176': 'Rain',   // é˜µé›¨
                '179': 'Rain',   // é›ªé˜µé›¨
                '182': 'Rain',   // é›¨å¤¹é›ª
                '185': 'Drizzle', // å†»æ¯›æ¯›é›¨
                '200': 'Rain',   // é›·é˜µé›¨
                '227': 'Snow',   // é›ª
                '230': 'Snow',   // å¤§é›ª
                '248': 'Clouds', // é›¾
                '260': 'Clouds', // å†»é›¾
                '263': 'Drizzle', // æ¯›æ¯›é›¨
                '266': 'Drizzle', // ä¸­æ¯›æ¯›é›¨
                '281': 'Drizzle', // å†»æ¯›æ¯›é›¨
                '284': 'Drizzle', // ä¸­å†»æ¯›æ¯›é›¨
                '293': 'Rain',   // å°é›¨
                '296': 'Rain',   // ä¸­é›¨
                '299': 'Rain',   // å¤§é›¨
                '302': 'Rain',   // ç‰¹å¤§é›¨
                '305': 'Rain',   // æš´é›¨
                '308': 'Rain',   // å¤§æš´é›¨
                '311': 'Rain',   // ç‰¹å¤§æš´é›¨
                '314': 'Rain',   // å†»é›¨
                '317': 'Rain',   // å†»é›¨
                '320': 'Snow',   // æš´é›¨é›ª
                '323': 'Snow',   // é›ª
                '326': 'Snow',   // å¤§é›ª
                '329': 'Snow',   // ç‰¹å¤§é›ª
                '332': 'Snow',   // é›ªæš´
                '335': 'Snow',   // é›ªæš´
                '338': 'Snow',   // ç‰¹å¤§é›ªæš´
                '350': 'Drizzle', // é›·é˜µé›¨
                '353': 'Rain',   // é˜µé›¨
                '356': 'Rain',   // é˜µé›¨
                '359': 'Rain',   // é˜µé›¨
                '362': 'Rain',   // å°é˜µé›¨
                '365': 'Rain',   // ä¸­é˜µé›¨
                '368': 'Rain',   // å¤§é˜µé›¨
                '371': 'Snow',   // é›ªé˜µé›¨
                '374': 'Snow',   // å°é›ªé˜µé›¨
                '377': 'Snow',   // é›ªé˜µé›¨
                '386': 'Rain',   // é›·é˜µé›¨
                '389': 'Rain',   // é›·é˜µé›¨
                '392': 'Snow',   // é›·é›ª
                '395': 'Snow'    // é›·é›ª
            };
            return codeMap[code] || 'Clear';
        }
        
        // æ˜ å°„å¤©æ°”ä»£ç åˆ°ä¸­æ–‡æè¿°
        function mapWeatherDescription(code) {
            const descMap = {
                '113': 'æ™´æœ—',
                '116': 'å¤šäº‘',
                '119': 'é˜´å¤©',
                '122': 'å¤§é˜´å¤©',
                '143': 'é›¾',
                '176': 'é˜µé›¨',
                '179': 'é›ªé˜µé›¨',
                '182': 'é›¨å¤¹é›ª',
                '185': 'å†»æ¯›æ¯›é›¨',
                '200': 'é›·é˜µé›¨',
                '227': 'é›ª',
                '230': 'å¤§é›ª',
                '248': 'é›¾',
                '260': 'å†»é›¾',
                '263': 'æ¯›æ¯›é›¨',
                '266': 'ä¸­æ¯›æ¯›é›¨',
                '281': 'å†»æ¯›æ¯›é›¨',
                '284': 'ä¸­å†»æ¯›æ¯›é›¨',
                '293': 'å°é›¨',
                '296': 'ä¸­é›¨',
                '299': 'å¤§é›¨',
                '302': 'ç‰¹å¤§é›¨',
                '305': 'æš´é›¨',
                '308': 'å¤§æš´é›¨',
                '311': 'ç‰¹å¤§æš´é›¨',
                '314': 'å†»é›¨',
                '317': 'å†»é›¨',
                '320': 'æš´é›¨é›ª',
                '323': 'é›ª',
                '326': 'å¤§é›ª',
                '329': 'ç‰¹å¤§é›ª',
                '332': 'é›ªæš´',
                '335': 'é›ªæš´',
                '338': 'ç‰¹å¤§é›ªæš´',
                '350': 'é›·é˜µé›¨',
                '353': 'é˜µé›¨',
                '356': 'é˜µé›¨',
                '359': 'é˜µé›¨',
                '362': 'å°é˜µé›¨',
                '365': 'ä¸­é˜µé›¨',
                '368': 'å¤§é˜µé›¨',
                '371': 'é›ªé˜µé›¨',
                '374': 'å°é›ªé˜µé›¨',
                '377': 'é›ªé˜µé›¨',
                '386': 'é›·é˜µé›¨',
                '389': 'é›·é˜µé›¨',
                '392': 'é›·é›ª',
                '395': 'é›·é›ª'
            };
            return descMap[code] || 'æ™´æœ—';
        }
        

        
        function updateWeatherDisplay(weatherData) {
            const temp = Math.round(weatherData.main.temp);
            const description = weatherData.weather[0].description;
            const icon = getWeatherIcon(weatherData.weather[0].main);
            const updateTime = new Date().toLocaleTimeString('zh-CN', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            
            document.getElementById('weather-temp').textContent = `${temp}Â°C`;
            document.getElementById('weather-desc').textContent = description;
            document.getElementById('weather-icon').textContent = icon;
            document.getElementById('weather-update').textContent = `${updateTime} æ›´æ–°`;
        }

        // æ›´æ–°æ—¥å‡ºæ—¥è½æ—¶é—´æ˜¾ç¤º
        function updateSunTimes(weatherData) {
            if (weatherData.sunrise && weatherData.sunset) {
                // æ ¼å¼åŒ–æ—¶é—´ï¼ˆè‹¹æœAPIå¯èƒ½è¿”å›ä¸åŒæ ¼å¼ï¼‰
                const sunriseTime = formatSunTime(weatherData.sunrise);
                const sunsetTime = formatSunTime(weatherData.sunset);
                
                // æ›´æ–°1æœˆ1æ—¥çš„æ—¥å‡ºæ—¥è½
                const janFirstSunTime = document.querySelector('.date-group .sun-time');
                if (janFirstSunTime) {
                    janFirstSunTime.innerHTML = `ğŸŒ… æ—¥å‡ºï¼š${sunriseTime} | ğŸŒ‡ æ—¥è½ï¼š${sunsetTime}`;
                }
                
                // æ›´æ–°1æœˆ2æ—¥çš„æ—¥è½ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰
                const allSunTimes = document.querySelectorAll('.sun-time');
                if (allSunTimes.length > 1) {
                    allSunTimes[1].innerHTML = `ğŸŒ‡ æ—¥è½ï¼š${sunsetTime}`;
                }
            }
        }

        // æ ¼å¼åŒ–æ—¥å‡ºæ—¥è½æ—¶é—´ä¸º24å°æ—¶åˆ¶
        function formatSunTime(timeString) {
            console.log('åŸå§‹æ—¶é—´å­—ç¬¦ä¸²:', timeString);
            
            // å¦‚æœæ²¡æœ‰æ—¶é—´æ•°æ®ï¼Œè¿”å›--
            if (!timeString || timeString === '') {
                console.log('æ²¡æœ‰æ—¶é—´æ•°æ®ï¼Œè¿”å›--');
                return '--';
            }
            
            // å°è¯•è§£æä¸åŒçš„æ—¶é—´æ ¼å¼
            if (timeString.includes(':')) {
                // å¦‚æœå·²ç»åŒ…å«å†’å·ï¼Œæå–å°æ—¶:åˆ†é’Ÿ
                const timeMatch = timeString.match(/(\d{1,2}):(\d{2})/);
                if (timeMatch) {
                    const hours = parseInt(timeMatch[1]);
                    const minutes = timeMatch[2];
                    console.log('å†’å·æ ¼å¼è§£æ:', hours, minutes);
                    return `${hours.toString().padStart(2, '0')}:${minutes}`;
                }
            }
            
            // å¦‚æœæ˜¯4ä½æ•°å­—æ ¼å¼ï¼ˆå¦‚HHMMï¼‰
            if (/^\d{4}$/.test(timeString)) {
                const hours = parseInt(timeString.substring(0, 2));
                const minutes = timeString.substring(2);
                console.log('4ä½æ•°å­—æ ¼å¼è§£æ:', hours, minutes);
                return `${hours.toString().padStart(2, '0')}:${minutes}`;
            }
            
            // å¦‚æœæ˜¯12å°æ—¶åˆ¶æ ¼å¼ï¼ˆå¦‚6:35AMï¼‰
            const amPmMatch = timeString.match(/(\d{1,2}):(\d{2})\s*(AM|PM)/i);
            if (amPmMatch) {
                let hours = parseInt(amPmMatch[1]);
                const minutes = amPmMatch[2];
                const ampm = amPmMatch[3].toUpperCase();
                
                console.log('12å°æ—¶åˆ¶è§£æ:', hours, minutes, ampm);
                
                if (ampm === 'PM' && hours !== 12) {
                    hours += 12;
                } else if (ampm === 'AM' && hours === 12) {
                    hours = 0;
                }
                
                return `${hours.toString().padStart(2, '0')}:${minutes}`;
            }
            
            console.log('æ— æ³•è§£ææ—¶é—´æ ¼å¼ï¼Œè¿”å›--');
            return '--';
        }
        
        function getWeatherIcon(weatherMain) {
            const iconMap = {
                'Clear': 'â˜€ï¸',
                'Clouds': 'â˜ï¸',
                'Rain': 'ğŸŒ§ï¸',
                'Drizzle': 'ğŸŒ¦ï¸',
                'Thunderstorm': 'â›ˆï¸',
                'Snow': 'â„ï¸',
                'Mist': 'ğŸŒ«ï¸',
                'Fog': 'ğŸŒ«ï¸',
                'Haze': 'ğŸŒ«ï¸'
            };
            return iconMap[weatherMain] || 'ğŸŒ¤ï¸';
        }
        
        // å›¾ç‰‡ç¼“å­˜ç®¡ç†
        const imageCache = new Map();
        const imageLoadStatus = new Map();
        
        // é¢„åŠ è½½æ‰€æœ‰å›¾ç‰‡ - å¼ºåˆ¶åˆ·æ–°ç¼“å­˜ç‰ˆæœ¬
        function preloadImages() {
            console.log('å¼€å§‹é¢„åŠ è½½å›¾ç‰‡...');
            
            // åˆ›å»ºä¸€ä¸ªç¼“å­˜ Map æ¥è·Ÿè¸ªå·²åŠ è½½çš„å›¾ç‰‡
            const imageCache = new Map();
            let preloadedCount = 0;
            
            // è·å–æ‰€æœ‰å›¾ç‰‡
            const allImages = document.querySelectorAll('.travel-image');
            const totalImages = allImages.length;
            
            // ç»Ÿä¸€é¢„åŠ è½½æ‰€æœ‰å›¾ç‰‡
            allImages.forEach(img => {
                const src = img.src;
                
                // æ£€æŸ¥å›¾ç‰‡æ˜¯å¦å·²ç»åœ¨è§†å£ä¸­å¯è§
                const rect = img.getBoundingClientRect();
                const isVisible = rect.top < window.innerHeight && rect.bottom > 0;
                
                // å¦‚æœå›¾ç‰‡ä¸åœ¨ç¼“å­˜ä¸­ï¼Œåˆ™è¿›è¡Œé¢„åŠ è½½
                if (!imageCache.has(src)) {
                    const preloadImg = new Image();
                    preloadImg.onload = function() {
                        imageCache.set(src, true);
                        preloadedCount++;
                        console.log(`âœ… å›¾ç‰‡é¢„åŠ è½½æˆåŠŸ: ${src} (${preloadedCount}/${totalImages})`);
                    };
                    
                    preloadImg.onerror = function() {
                        imageCache.set(src, false);
                        console.warn(`âš ï¸ å›¾ç‰‡é¢„åŠ è½½å¤±è´¥: ${src}`);
                    };
                    
                    preloadImg.src = src;
                }
            });
            
            console.log(`å›¾ç‰‡é¢„åŠ è½½å®Œæˆï¼Œå…±å¤„ç†äº† ${totalImages} å¼ å›¾ç‰‡`);
        }
        
        // æ›´æ–°å›¾ç‰‡åŠ è½½çŠ¶æ€æ˜¾ç¤º
        function updateImageLoadStatus(img, loaded) {
            if (loaded) {
                img.style.opacity = '1';
                img.style.filter = 'none';
            } else {
                img.style.opacity = '0.5';
                img.style.filter = 'grayscale(100%)';
            }
        }
        
        // å›¾ç‰‡ç®¡ç†åŠŸèƒ½
        function addImage(element) {
            // æ·»åŠ å›¾ç‰‡åŠŸèƒ½å·²ç¦ç”¨
            return;
        }
        
        // ç»Ÿä¸€çš„å›¾ç‰‡ç‚¹å‡»å¤„ç†å‡½æ•°
        function handleImageClick(imgElement) {
            // è·å–å½“å‰è¡Œç¨‹çš„æ‰€æœ‰å›¾ç‰‡
            const imagesGrid = imgElement.closest('.images-grid');
            const allImagesInGrid = imagesGrid.querySelectorAll('.travel-image');
            
            // æå–æ‰€æœ‰å›¾ç‰‡URL
            const images = Array.from(allImagesInGrid).map(img => img.src);
            
            // æ‰¾åˆ°å½“å‰ç‚¹å‡»å›¾ç‰‡çš„ç´¢å¼•
            const currentIndex = Array.from(allImagesInGrid).indexOf(imgElement);
            
            // è°ƒç”¨æ¨¡æ€æ¡†å‡½æ•°ï¼Œä¼ é€’å›¾ç‰‡æ•°ç»„å’Œå½“å‰ç´¢å¼•
            showImageModal(imgElement.src, images, currentIndex);
        }
        
        // ä¼˜åŒ–çš„å›¾ç‰‡æ”¾å¤§æ¨¡æ€æ¡†ï¼ˆæ”¯æŒæ»‘åŠ¨ï¼‰
        function showImageModal(src, images = [src], currentIndex = 0) {
            // æ£€æŸ¥å›¾ç‰‡æ˜¯å¦å·²ç¼“å­˜
            if (imageCache.has(src) && imageCache.get(src) === false) {
                alert('å›¾ç‰‡æš‚æ—¶æ— æ³•åŠ è½½ï¼Œè¯·ç¨åå†è¯•');
                return;
            }
            
            const modal = document.createElement('div');
            modal.className = 'image-modal';
            
            // åˆ›å»ºåŠ è½½çŠ¶æ€
            const loadingDiv = document.createElement('div');
            loadingDiv.className = 'modal-loading';
            loadingDiv.innerHTML = '<div class="loading-spinner"></div><p>å›¾ç‰‡åŠ è½½ä¸­...</p>';
            
            // åˆ›å»ºå›¾ç‰‡å…ƒç´ 
            const img = document.createElement('img');
            img.alt = `å›¾ç‰‡ ${currentIndex + 1} / ${images.length}`;
            img.style.display = 'none';
            
            // åˆ›å»ºå¯¼èˆªç®­å¤´ï¼ˆå¤šå¼ å›¾ç‰‡æ—¶æ˜¾ç¤ºï¼‰
            let navControls = '';
            if (images.length > 1) {
                navControls = `
                    <div class="modal-nav modal-prev" onclick="previousImage()">â€¹</div>
                    <div class="modal-nav modal-next" onclick="nextImage()">â€º</div>
                    <div class="modal-counter">${currentIndex + 1} / ${images.length}</div>
                `;
            }
            
            modal.innerHTML = `
                <span class="modal-close" onclick="closeImageModal()">&times;</span>
                ${navControls}
            `;
            modal.appendChild(loadingDiv);
            modal.appendChild(img);
            
            document.body.appendChild(modal);
            modal.style.display = 'block';
            
            // å…¨å±€å˜é‡ç”¨äºæ»‘åŠ¨åŠŸèƒ½
            window.currentImages = images;
            window.currentImageIndex = currentIndex;
            window.modalImg = img;
            window.modalLoading = loadingDiv;
            
            // å¼€å§‹åŠ è½½å›¾ç‰‡
            loadImage(src);
            
            // ç‚¹å‡»ç©ºç™½å¤„å…³é—­
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeImageModal();
                }
            });
            
            // é”®ç›˜äº‹ä»¶
            document.addEventListener('keydown', function imageKeyHandler(e) {
                if (e.key === 'Escape') {
                    closeImageModal();
                    document.removeEventListener('keydown', imageKeyHandler);
                } else if (images.length > 1 && (e.key === 'ArrowLeft' || e.key === 'ArrowRight')) {
                    e.preventDefault();
                    if (e.key === 'ArrowLeft') {
                        previousImage();
                    } else {
                        nextImage();
                    }
                }
            });
            
            // è§¦æ‘¸æ»‘åŠ¨æ”¯æŒ
            let startX = 0;
            let endX = 0;
            
            modal.addEventListener('touchstart', (e) => {
                startX = e.touches[0].clientX;
            });
            
            modal.addEventListener('touchend', (e) => {
                endX = e.changedTouches[0].clientX;
                handleSwipe();
            });
            
            function handleSwipe() {
                if (images.length <= 1) return;
                
                const threshold = 50; // æ»‘åŠ¨é˜ˆå€¼
                const diff = startX - endX;
                
                if (Math.abs(diff) > threshold) {
                    if (diff > 0) {
                        nextImage(); // å‘å·¦æ»‘åŠ¨ï¼Œä¸‹ä¸€å¼ 
                    } else {
                        previousImage(); // å‘å³æ»‘åŠ¨ï¼Œä¸Šä¸€å¼ 
                    }
                }
            }
        }
        
        // åŠ è½½å›¾ç‰‡å‡½æ•°
        function loadImage(src) {
            window.modalImg.onload = function() {
                window.modalLoading.style.display = 'none';
                window.modalImg.style.display = 'block';
                imageCache.set(src, true);
            };
            
            window.modalImg.onerror = function() {
                window.modalLoading.innerHTML = '<div class="error-icon">âš ï¸</div><p>å›¾ç‰‡åŠ è½½å¤±è´¥</p><button onclick="closeImageModal()">å…³é—­</button>';
                imageCache.set(src, false);
            };
            
            window.modalImg.src = src;
        }
        
        // ä¸Šä¸€å¼ å›¾ç‰‡
        function previousImage() {
            if (!window.currentImages || window.currentImages.length <= 1) return;
            
            window.currentImageIndex = window.currentImageIndex > 0 ? 
                window.currentImageIndex - 1 : window.currentImages.length - 1;
            
            const newSrc = window.currentImages[window.currentImageIndex];
            window.modalImg.alt = `å›¾ç‰‡ ${window.currentImageIndex + 1} / ${window.currentImages.length}`;
            window.modalLoading.style.display = 'block';
            window.modalLoading.innerHTML = '<div class="loading-spinner"></div><p>åŠ è½½ä¸­...</p>';
            
            // æ›´æ–°è®¡æ•°å™¨æ˜¾ç¤º
            const counter = document.querySelector('.modal-counter');
            if (counter) {
                counter.textContent = `${window.currentImageIndex + 1} / ${window.currentImages.length}`;
            }
            
            loadImage(newSrc);
        }
        
        // ä¸‹ä¸€å¼ å›¾ç‰‡
        function nextImage() {
            if (!window.currentImages || window.currentImages.length <= 1) return;
            
            window.currentImageIndex = window.currentImageIndex < window.currentImages.length - 1 ? 
                window.currentImageIndex + 1 : 0;
            
            const newSrc = window.currentImages[window.currentImageIndex];
            window.modalImg.alt = `å›¾ç‰‡ ${window.currentImageIndex + 1} / ${window.currentImages.length}`;
            window.modalLoading.style.display = 'block';
            window.modalLoading.innerHTML = '<div class="loading-spinner"></div><p>åŠ è½½ä¸­...</p>';
            
            // æ›´æ–°è®¡æ•°å™¨æ˜¾ç¤º
            const counter = document.querySelector('.modal-counter');
            if (counter) {
                counter.textContent = `${window.currentImageIndex + 1} / ${window.currentImages.length}`;
            }
            
            loadImage(newSrc);
        }
        
        function closeImageModal() {
            const modal = document.querySelector('.image-modal');
            if (modal) {
                modal.remove();
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–åŠŸèƒ½
        window.addEventListener('load', () => {
            // è·å–å¤©æ°”ä¿¡æ¯
            getBeijingWeather();
            
            // æ¯30åˆ†é’Ÿæ›´æ–°ä¸€æ¬¡å¤©æ°”
            setInterval(getBeijingWeather, 30 * 60 * 1000);
            
            // åˆå§‹åŒ–è·ç¦»ä¿¡æ¯
            updateDistanceInfo(currentDay);
            
            // é¢„åŠ è½½æ‰€æœ‰å›¾ç‰‡ï¼Œå»¶è¿Ÿ2ç§’å¼€å§‹
            setTimeout(() => {
                preloadImages();
            }, 2000);
        });
    </script>
</body>
</html>
